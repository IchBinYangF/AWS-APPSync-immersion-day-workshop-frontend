(this.webpackJsonpapplication=this.webpackJsonpapplication||[]).push([[2],{464:function(e,t,n){},588:function(e,t){},599:function(e,t){},620:function(e,t){},708:function(e,t,n){var a={"./amplify-amazon-button_5.entry.js":[751,13],"./amplify-auth-fields_9.entry.js":[752,14],"./amplify-authenticator.entry.js":[753,7],"./amplify-button_3.entry.js":[754,15],"./amplify-chatbot.entry.js":[778,0,6],"./amplify-checkbox.entry.js":[755,16],"./amplify-confirm-sign-in_7.entry.js":[756,8],"./amplify-container.entry.js":[757,17],"./amplify-federated-buttons_2.entry.js":[758,18],"./amplify-federated-sign-in.entry.js":[759,19],"./amplify-form-field_4.entry.js":[760,20],"./amplify-greetings.entry.js":[761,21],"./amplify-icon-button.entry.js":[762,22],"./amplify-icon.entry.js":[763,9],"./amplify-link.entry.js":[764,23],"./amplify-nav_2.entry.js":[765,24],"./amplify-photo-picker.entry.js":[766,25],"./amplify-picker.entry.js":[767,26],"./amplify-radio-button_2.entry.js":[768,10],"./amplify-s3-album.entry.js":[769,0,1,27],"./amplify-s3-image-picker.entry.js":[770,0,1,28],"./amplify-s3-image.entry.js":[771,0,1,29],"./amplify-s3-text-picker.entry.js":[772,0,1,30],"./amplify-s3-text.entry.js":[773,0,1,31],"./amplify-select-mfa-type.entry.js":[774,32],"./amplify-sign-in-button.entry.js":[775,11],"./amplify-toast.entry.js":[776,33],"./amplify-tooltip.entry.js":[777,34]};function s(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],s=t[0];return Promise.all(t.slice(1).map(n.e)).then((function(){return n(s)}))}s.keys=function(){return Object.keys(a)},s.id=708,e.exports=s},711:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),r=n(123),i=n.n(r),c=(n(464),n(225)),o=n(41),l=n(408),d=n(29),u=n(100),m=n(48),b=n(25),j=n(78),f=n(174),x=n.n(f),h=n(712),p=(n(339),n(409)),g=n(407),y=n(8),v=["value","onClick","onChange","disabled"],O={margin:{top:20,right:20,bottom:60,left:80},enableSlices:"x"},w=function(e){var t=e.name,n=e.dataPoints,s=void 0===n?[]:n,r=e.live,i=void 0!==r&&r,c=Object(a.useState)([]),o=Object(b.a)(c,2),l=o[0],d=o[1];Object(a.useEffect)((function(){d((function(e){return function(e,t){var n=t.map((function(e){return{x:new Date(e.createdAt),y:e.value}})),a=[].concat(Object(j.a)(e),Object(j.a)(n));return a.length<=64?a:a.slice(a.length-64)}(e,s)}))}),[s]),Object(a.useEffect)((function(){return function(){console.log("reset name. clear data"),d([])}}),[t]),Object(a.useEffect)((function(){i&&(console.log("going live. clear data"),d([]))}),[i]);return Object(y.jsx)(p.a,Object(m.a)(Object(m.a)(Object(m.a)({},O),i?{enablePoints:!1,isInteractive:!1,animate:!1}:{enablePoints:!0,isInteractive:!0,animate:!0}),{},{margin:{top:30,right:50,bottom:60,left:50},data:[{id:t,data:l}],xScale:{type:"time",format:"native"},yScale:{type:"linear",max:100},axisTop:{format:"%x",tickValues:"every day"},axisBottom:{format:"%I:%M %p",tickValues:"every 4 hours",legend:t,legendPosition:"middle",legendOffset:46},axisRight:{},enableGridX:!0,curve:"monotoneX",useMesh:!0,theme:{axis:{ticks:{text:{fontSize:14}}},grid:{line:{stroke:"#ddd",strokeDasharray:"1 2"}}},enableSlices:!1,motionStiffness:120,motionDamping:50,xFormat:function(e){return"".concat(Object(h.default)(e,"p"))}}))},N=function(e,t){switch(t.type){case"query":return Object(m.a)(Object(m.a)({},e),{},{next:t.token});case"next":return Object(m.a)(Object(m.a)({},e),{},{prev:e.current,current:e.next,next:void 0});case"prev":return Object(m.a)(Object(m.a)({},e),{},{next:e.current,current:e.prev,prev:void 0});case"reset":return{current:null};default:throw new Error}};var k=s.a.forwardRef((function(e,t){var n=e.value,a=e.onClick,s=e.onChange,r=e.disabled;Object(l.a)(e,v);return Object(y.jsxs)("div",{className:"relative w-48 rounded-md shadow-sm",children:[Object(y.jsx)("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:Object(y.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-5 h-5 text-gray-400",children:Object(y.jsx)("path",{fillRule:"evenodd",d:"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z",clipRule:"evenodd"})})}),Object(y.jsx)("input",{id:"userDate",type:"text",value:n,onChange:s,onFocus:a,disabled:r,className:"focus:ring-indigo-500 focus:border-indigo-500 block w-full pl-10 sm:text-sm border-gray-300 rounded-md",autoComplete:"off"})]})})),C=function(){var e=Object(a.useState)(!1),t=Object(b.a)(e,2),n=t[0],s=t[1],r=Object(a.useState)(""),i=Object(b.a)(r,2),c=i[0],o=i[1],l=Object(a.useState)(new Date),m=Object(b.a)(l,2),j=m[0],f=m[1],p=Object(a.useState)([]),v=Object(b.a)(p,2),O=v[0],C=v[1],S=Object(a.useReducer)(N,{}),D=Object(b.a)(S,2),_=D[0],A=D[1];Object(a.useEffect)((function(){console.log("+",JSON.stringify(_,null,2))}),[_]);var M=function(){var e=Object(u.a)(Object(d.a)().mark((function e(t,n){var a;return Object(d.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.graphql({query:"\n  query list(\n    $name: ID!\n    $createdAt: ModelStringKeyConditionInput\n    $limit: Int\n    $sortDirection: ModelSortDirection\n    $nextToken: String\n  ) {\n    queryDataPointsByNameAndDateTime(\n      name: $name\n      createdAt: $createdAt\n      limit: $limit\n      sortDirection: $sortDirection\n      nextToken: $nextToken\n    ) {\n      items {\n        createdAt\n        name\n        value\n      }\n      nextToken\n    }\n  }\n",variables:{name:c,nextToken:t,limit:64,createdAt:{beginsWith:Object(h.default)(j,"yyyy-MM-dd")}}});case 2:a=e.sent,console.log(a),C(a.data.queryDataPointsByNameAndDateTime.items),A({type:n}),A({type:"query",token:a.data.queryDataPointsByNameAndDateTime.nextToken||void 0});case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){if(n&&c){console.log("starting sub on",c);var e=g.a.graphql({query:"\n  subscription OnCreateDataPoint($name: ID!) {\n    onCreateDataPoint(name: $name) {\n      createdAt\n      name\n      value\n    }\n  }\n",variables:{name:c}}).subscribe({next:function(e){C([e.value.data.onCreateDataPoint])}});return function(){console.log("stopping subscription"),e.unsubscribe()}}}),[c,n]),Object(y.jsxs)("div",{className:"App ",children:[Object(y.jsxs)("div",{className:"flex justify-between px-4 space-x-2 md:px-0",children:[Object(y.jsxs)("form",{className:"flex space-x-2",onSubmit:function(e){e.preventDefault(),M(null,"reset")},children:[Object(y.jsxs)("div",{className:"relative w-48 rounded-md shadow-sm",children:[Object(y.jsx)("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:Object(y.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-5 h-5 text-gray-400",children:Object(y.jsx)("path",{d:"M2 11a1 1 0 011-1h2a1 1 0 011 1v5a1 1 0 01-1 1H3a1 1 0 01-1-1v-5zM8 7a1 1 0 011-1h2a1 1 0 011 1v9a1 1 0 01-1 1H9a1 1 0 01-1-1V7zM14 4a1 1 0 011-1h2a1 1 0 011 1v12a1 1 0 01-1 1h-2a1 1 0 01-1-1V4z"})})}),Object(y.jsx)("input",{id:"name",value:c,disabled:n,autoComplete:"off",type:"text",placeholder:"series name",onChange:function(e){return o(e.target.value)},className:"focus:ring-indigo-500 focus:border-indigo-500 block w-full pl-10 sm:text-sm border-gray-300 rounded-md"})]}),!n&&Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("div",{children:Object(y.jsx)(x.a,{selected:j,onChange:function(e){return f(e)},disabled:n,customInput:Object(y.jsx)(k,{})})}),Object(y.jsx)("div",{className:"",children:Object(y.jsx)("span",{className:"block w-full rounded-md shadow-sm",children:Object(y.jsx)("button",{disabled:!c||n,type:"submit",className:"flex justify-center w-full px-4 py-2 text-sm font-medium text-white transition duration-150 ease-in-out bg-gray-600 border border-transparent rounded-md disabled:cursor-not-allowed disabled:opacity-75 hover:bg-gray-500 focus:outline-none focus:border-gray-700 focus:shadow-outline-indigo active:bg-gray-700",children:"view"})})})]})]}),Object(y.jsx)("div",{className:"",children:Object(y.jsx)("span",{className:"block w-full rounded-md shadow-sm",children:Object(y.jsx)("button",{disabled:!c,onClick:function(){return C([]),A({type:"reset"}),void s((function(e){return!e}))},className:"flex justify-center w-full px-4 py-2 text-sm font-medium text-white transition duration-150 ease-in-out bg-gray-600 border border-transparent rounded-md disabled:cursor-not-allowed disabled:opacity-75 hover:bg-gray-500 focus:outline-none focus:border-gray-700 focus:shadow-outline-indigo active:bg-gray-700",children:n?"Stop":"Go live"})})})]}),Object(y.jsxs)("div",{className:"flex items-center justify-between mt-8 space-x-4",children:[Object(y.jsx)("div",{className:"flex-shrink-0 w-16",children:void 0!==_.prev&&Object(y.jsx)("span",{className:"inline-flex rounded-full shadow-sm",children:Object(y.jsx)("button",{type:"button",className:"active:bg-gray-700 bg-gray-600 border border-transparent duration-150 ease-in-out focus:border-gray-700 focus:outline-none focus:shadow-outline-indigo font-medium hover:bg-gray-500 inline-flex items-center leading-5 p-2 rounded-full text-sm text-white transition",onClick:function(e){return M(_.prev,"prev")},children:Object(y.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-5 h-5",children:Object(y.jsx)("path",{d:"M8.445 14.832A1 1 0 0010 14v-2.798l5.445 3.63A1 1 0 0017 14V6a1 1 0 00-1.555-.832L10 8.798V6a1 1 0 00-1.555-.832l-6 4a1 1 0 000 1.664l6 4z"})})})})}),Object(y.jsx)("div",{className:"relative flex-grow graph",children:Object(y.jsx)("div",{className:"absolute top-0 w-full h-full",children:Object(y.jsx)(w,{name:c,live:n,dataPoints:O})})}),Object(y.jsx)("div",{className:"flex-shrink-0 w-16",children:void 0!==_.next&&Object(y.jsx)("span",{className:"inline-flex rounded-full shadow-sm",children:Object(y.jsx)("button",{type:"button",className:"active:bg-gray-700 bg-gray-600 border border-transparent duration-150 ease-in-out focus:border-gray-700 focus:outline-none focus:shadow-outline-indigo font-medium hover:bg-gray-500 inline-flex items-center leading-5 p-2 rounded-full text-sm text-white transition",onClick:function(e){return M(_.next,"next")},children:Object(y.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",className:"w-5 h-5",fill:"currentColor",children:Object(y.jsx)("path",{d:"M4.555 5.168A1 1 0 003 6v8a1 1 0 001.555.832L10 11.202V14a1 1 0 001.555.832l6-4a1 1 0 000-1.664l-6-4A1 1 0 0010 6v2.798l-5.445-3.63z"})})})})})]})]})};function S(e,t){if("tick"===t.type)return Object(m.a)(Object(m.a)({},e),{},{count:e.count+1,ticker:new Date(e.ticker.getTime()+18e5)});if("update"===t.type){var n=Object(m.a)(Object(m.a)({},e),t.data),a=new Date(n.date);return a.setMinutes(n.time.getMinutes()),a.setHours(n.time.getHours()),Object(m.a)(Object(m.a)({},n),{},{ticker:a})}throw new Error}var D=new Date;var _=function(){var e=Object(a.useState)(!1),t=Object(b.a)(e,2),n=t[0],s=t[1],r=Object(a.useState)([]),i=Object(b.a)(r,2),c=i[0],o=i[1],l=Object(a.useReducer)(S,{date:D,time:D,ticker:D,series:"hello-world",count:0}),d=Object(b.a)(l,2),u=d[0],m=d[1];return Object(a.useEffect)((function(){if(n){o([]);var e=setInterval((function(){m({type:"tick"})}),200);return function(){console.log("clear interval",e),clearInterval(e)}}}),[n,m]),Object(a.useEffect)((function(){if(n){var e=u.ticker,t=u.series;console.log(e.toISOString()),g.a.graphql({query:"\n  mutation CreateDataPoint($input: CreateDataPointInput!) {\n    createDataPoint(input: $input) {\n      createdAt\n      name\n      value\n    }\n  }\n",variables:{input:{createdAt:e.toISOString(),name:t,value:parseInt(60*Math.random())+20}}}).then((function(e){o((function(e){return[].concat(Object(j.a)(e),[{id:"feedback=".concat(e.length),success:!0}])}))})).catch((function(e){o((function(e){return[].concat(Object(j.a)(e),[{id:"feedback=".concat(e.length),success:!1}])}))}))}}),[n,u]),Object(y.jsx)("div",{className:"Generator",children:Object(y.jsxs)("div",{className:"flex flex-col",children:[Object(y.jsxs)("div",{className:"px-4 mt-6 space-y-6",children:[Object(y.jsxs)("div",{className:"flex items-center",children:[Object(y.jsx)("label",{htmlFor:"series",className:"flex-shrink-0 block w-1/3 text-sm font-medium leading-5 text-gray-700",children:"Series Name:"}),Object(y.jsx)("div",{className:"flex-grow mt-1 ml-4 rounded-md shadow-sm",children:Object(y.jsx)("input",{id:"series",value:u.series,disabled:n,onChange:function(e){return m({type:"update",data:{series:e.target.value}})},type:"text",required:!0,className:"block w-full px-3 py-2 placeholder-gray-400 transition duration-150 ease-in-out border border-gray-300 rounded-md appearance-none focus:outline-none focus:shadow-outline-blue focus:border-blue-300 sm:text-sm sm:leading-5"})})]}),Object(y.jsxs)("div",{className:"flex items-center",children:[Object(y.jsx)("label",{htmlFor:"date",className:"flex-shrink-0 block w-1/3 text-sm font-medium leading-5 text-gray-700",children:"Date"}),Object(y.jsx)("div",{className:"flex-grow ml-4 rounded-md shadow-sm w-full-date",children:Object(y.jsx)(x.a,{id:"date",onChange:function(e){return m({type:"update",data:{date:e}})},disabled:n,selected:u.date,className:"block w-full px-3 py-2 placeholder-gray-400 transition duration-150 ease-in-out border border-gray-300 rounded-md w-appearance-none focus:outline-none focus:shadow-outline-blue focus:border-blue-300 sm:text-sm sm:leading-5"})})]}),Object(y.jsxs)("div",{className:"flex items-center",children:[Object(y.jsx)("label",{htmlFor:"time",className:"flex-shrink-0 block w-1/3 text-sm font-medium leading-5 text-gray-700",children:"Start At"}),Object(y.jsx)("div",{className:"flex-grow mt-1 ml-4 rounded-md shadow-sm w-full-date",children:Object(y.jsx)(x.a,{id:"time",onChange:function(e){return m({type:"update",data:{time:e}})},disabled:n,showTimeSelect:!0,showTimeSelectOnly:!0,timeIntervals:15,timeCaption:"Time",dateFormat:"h:mm aa",selected:u.time,className:"block w-full px-3 py-2 placeholder-gray-400 transition duration-150 ease-in-out border border-gray-300 rounded-md w-appearance-none focus:outline-none focus:shadow-outline-blue focus:border-blue-300 sm:text-sm sm:leading-5"})})]}),Object(y.jsx)("div",{className:"mt-6",children:Object(y.jsx)("span",{className:"block w-full rounded-md shadow-sm",children:Object(y.jsx)("button",{type:"button",onClick:function(){return s((function(e){return!e}))},className:"flex justify-center w-full px-4 py-2 text-sm font-medium text-white transition duration-150 ease-in-out bg-gray-600 border border-transparent rounded-md disabled:cursor-not-allowed disabled:opacity-75 hover:bg-gray-500 focus:outline-none focus:border-gray-700 focus:shadow-outline-indigo active:bg-gray-700",children:n?"Stop":"Start"})})})]}),Object(y.jsxs)("div",{className:"p-4 mt-8",children:[Object(y.jsx)("h1",{className:"text-2xl font-bold leading-9",children:u.count}),Object(y.jsx)("div",{className:"flex flex-wrap mt-6 space-x-1 feedback",children:c.map((function(e){return Object(y.jsx)("span",{className:"mt-1 block h-2 w-2 rounded-full text-white shadow-solid ".concat(e.success?"bg-green-300":"bg-red-300")},e.id)}))})]})]})})},A=n(201),M=n(168),T=n(822),I={aws_appsync_graphqlEndpoint:"https://5dlfw3ksj5bmxggdis36ikvvhm.appsync-api.eu-central-1.amazonaws.com/graphql",aws_appsync_authenticationType:"AMAZON_COGNITO_USER_POOLS",aws_appsync_region:"eu-central-1",aws_cognito_region:"eu-central-1",aws_user_pools_id:"eu-central-1_q94l2KXTM",aws_user_pools_web_client_id:"66jjjo1c0temeck0lgol4tbshm"};A.default.configure(I);var P=Object(T.a)((function(){return Object(y.jsx)(c.a,{children:Object(y.jsxs)("div",{children:[Object(y.jsxs)("div",{className:"pb-32 bg-gray-800",children:[Object(y.jsx)("nav",{className:"bg-gray-800",children:Object(y.jsx)("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:Object(y.jsx)("div",{className:"border-b border-gray-700",children:Object(y.jsxs)("div",{className:"flex items-center justify-between h-16 px-4 sm:px-0",children:[Object(y.jsxs)("div",{className:"flex items-center",children:[Object(y.jsx)("div",{className:"flex-shrink-0",children:Object(y.jsx)("img",{className:"w-8 h-8",src:"https://docs.amplify.aws/assets/logo-light.svg",alt:"amplify logo"})}),Object(y.jsx)("div",{className:"",children:Object(y.jsxs)("div",{className:"flex items-baseline ml-10 space-x-4",children:[Object(y.jsx)(c.b,{to:"/",exact:!0,activeClassName:"px-3 py-2 rounded-md text-sm font-medium text-white bg-gray-900 focus:outline-none focus:text-white focus:bg-gray-700",className:"px-3 py-2 text-sm font-medium text-gray-300 rounded-md hover:text-white hover:bg-gray-700 focus:outline-none focus:text-white focus:bg-gray-700",children:"Home"}),Object(y.jsx)(c.b,{to:"/generator",exact:!0,activeClassName:"px-3 py-2 rounded-md text-sm font-medium text-white bg-gray-900 focus:outline-none focus:text-white focus:bg-gray-700",className:"px-3 py-2 text-sm font-medium text-gray-300 rounded-md hover:text-white hover:bg-gray-700 focus:outline-none focus:text-white focus:bg-gray-700",children:"Generator"})]})})]}),Object(y.jsx)("div",{children:Object(y.jsx)("div",{className:"flex items-center ml-4 md:ml-6",children:Object(y.jsx)("button",{className:"p-1 text-gray-400 border-2 border-transparent rounded-full hover:text-white focus:outline-none focus:text-white focus:bg-gray-700","aria-label":"Notifications",children:Object(y.jsx)("svg",{className:"w-6 h-6",stroke:"currentColor",fill:"none",viewBox:"0 0 24 24",children:Object(y.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})})})})})]})})})}),Object(y.jsx)("header",{className:"py-10",children:Object(y.jsx)("div",{className:"px-4 mx-auto max-w-7xl sm:px-6 lg:px-8",children:Object(y.jsxs)(o.c,{children:[Object(y.jsx)(o.a,{exact:!0,path:"/",children:Object(y.jsx)("h1",{className:"text-3xl font-bold leading-9 text-white",children:"Real-time Dashboard"})}),Object(y.jsx)(o.a,{path:"/generator",children:Object(y.jsx)("h1",{className:"text-3xl font-bold leading-9 text-white",children:"Generate data"})})]})})})]}),Object(y.jsx)("main",{className:"-mt-32",children:Object(y.jsx)("div",{className:"px-4 pb-12 mx-auto max-w-7xl sm:px-6 lg:px-8",children:Object(y.jsx)("div",{className:"px-5 py-6 bg-white rounded-lg shadow sm:px-6",children:Object(y.jsxs)(o.c,{children:[Object(y.jsx)(o.a,{exact:!0,path:"/",children:Object(y.jsx)(C,{})}),Object(y.jsx)(o.a,{path:"/generator",children:Object(y.jsx)(_,{})})]})})})}),Object(y.jsx)("div",{className:"mx-auto text-center",children:Object(y.jsx)("button",{className:"p-2 font-bold underline",onClick:function(){M.a.signOut().then((function(){return window.location.reload()}))},children:"sign out"})})]})})}));i.a.render(Object(y.jsx)(s.a.StrictMode,{children:Object(y.jsx)(P,{})}),document.getElementById("root"))}},[[711,4,5]]]);
//# sourceMappingURL=main.ed0a0367.chunk.js.map