{"version":3,"sources":["../../../src/Providers/InteractionsProvider.ts","../node_modules/@aws-amplify/ui-components/node_modules/@aws-sdk/client-lex-runtime-service/node_modules/tslib/tslib.es6.js","../../../../models/models_0.ts","../../../endpoints.ts","../../../runtimeConfig.browser.ts","../../../runtimeConfig.shared.ts","../../../LexRuntimeServiceClient.ts","../../../../protocols/Aws_restJson1.ts","../../../../commands/PostTextCommand.ts","../../../../commands/PostContentCommand.ts","../../../../src/Providers/AWSLexProviderHelper/convert.ts","../../../src/Providers/AWSLexProvider.ts","../../src/Interactions.ts","../node_modules/@aws-amplify/ui-components/dist/esm-es5/amplify-chatbot.entry.js"],"names":["extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","__extends","TypeError","String","__","this","constructor","create","__assign","assign","t","s","i","n","arguments","length","apply","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","__generator","body","f","y","g","_","label","sent","trys","ops","verb","Symbol","iterator","v","op","pop","push","__read","o","m","r","ar","error","SuppressedError","_assign","contents","output","input","ChatState","MessageFrom","ChatErrorType","__spreadArrays","il","k","a","j","jl","writeString","view","offset","string","setUint8","charCodeAt","encodeWAV","samples","exportSampleRate","audioSize","dataSize","buffer","ArrayBuffer","DataView","setUint32","fmtSize","setUint16","byteOffset","Math","max","min","setInt16","floatTo16BitPCM","exportBuffer","recBuffer","recLength","recordSampleRate","mergedBuffers","bufferArray","Float32Array","set","mergeBuffers","downsampledBuffer","sampleRateRatio","newLength","round","offsetResult","offsetBuffer","nextOffsetBuffer","accum","count","downsampleBuffer","encodedWav","Blob","type","logger","Logger","AudioRecorder","options","streamBuffer","streamBufferLength","recording","init","_this","_a","browserOrNode","isBrowser","window","AudioContext","webkitAudioContext","audioContext","navigator","mediaDevices","getUserMedia","audio","stream","audioSupported","setupAudioNodes","catch","err_1","sourceNode","processorNode","analyserNode","resume","createMediaStreamSource","createScriptProcessor","onaudioprocess","audioProcessingEvent","inputBuffer","getChannelData","analyse","createAnalyser","minDecibels","maxDecibels","smoothingTimeConstant","connect","context","destination","startRecording","onSilence","visualizer","err_2","start","Date","now","stopRecording","clear","play","myBlob","res","rej","fileReader","FileReader","onload","playbackSource","disconnect","createBufferSource","decodeAudioData","buf","onended","err","onerror","readAsArrayBuffer","stop","analyser","fftSize","bufferLength","dataArray","Uint8Array","amplitude","time","getByteTimeDomainData","curr_value_time","exportWAV","blob","sampleRate","AmplifyChatbot","class_1","hostRef","registerInstance","clearOnComplete","conversationModeOn","botTitle","Translations","CHATBOT_TITLE","voiceEnabled","textEnabled","silenceTime","silenceThreshold","messages","text","chatState","Initial","messageJSX","messageList","map","message","h","class","from","content","SendingText","SendingVoice","client","Bot","User","chatCompleted","createEvent","submitHandler","_event","sendTextMessage","componentWillLoad","Interactions","onComplete","Error","NO_INTERACTIONS_MODULE_FOUND","validateProps","componentDidRender","element","shadowRoot","querySelector","scrollTop","scrollHeight","botName","welcomeMessage","appendToChat","audioRecorder","setError","Recoverable","data","emit","reset","Unrecoverable","NO_BOT_NAME_ERROR","CHAT_DISABLED_ERROR","handleMicButton","Listening","handleSilence","sendVoiceMessage","handleTextChange","event","target","handleCancelButton","handleToastClose","errorType","undefined","canvas","getBoundingClientRect","width","height","canvasCtx","getContext","fillStyle","clearRect","requestAnimationFrame","fillRect","lineWidth","color","getComputedStyle","document","documentElement","getPropertyValue","strokeStyle","beginPath","sliceWidth","x","moveTo","lineTo","stroke","visualize","response","err_3","send","audioInput","interactionsMessage","err_4","dialogState","messageType","inputTranscript","audioStream","listeningFooterJSX","handleButtonClick","variant","icon","footerJSX","inputPlaceholder","TEXT_INPUT_PLACEHOLDER","VOICE_INPUT_PLACEHOLDER","placeholder","I18n","get","description","handleInputChange","evt","disabled","errorToast","handleClose","render","Host","name","defineProperty","getElement","enumerable","configurable","style"],"mappings":"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","file":"static/js/6.7193e9f9.chunk.js","sourcesContent":["/*\n * Copyright 2017-2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { ConsoleLogger as Logger } from '@aws-amplify/core';\nvar logger = new Logger('AbstractInteractionsProvider');\nvar AbstractInteractionsProvider = /** @class */ (function () {\n    function AbstractInteractionsProvider(options) {\n        if (options === void 0) { options = {}; }\n        this._config = options;\n    }\n    AbstractInteractionsProvider.prototype.configure = function (config) {\n        if (config === void 0) { config = {}; }\n        this._config = __assign(__assign({}, this._config), config);\n        logger.debug(\"configure \" + this.getProviderName(), this._config);\n        return this.options;\n    };\n    AbstractInteractionsProvider.prototype.getCategory = function () {\n        return 'Interactions';\n    };\n    Object.defineProperty(AbstractInteractionsProvider.prototype, \"options\", {\n        get: function () {\n            return __assign({}, this._config);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return AbstractInteractionsProvider;\n}());\nexport { AbstractInteractionsProvider };\n//# sourceMappingURL=InteractionsProvider.js.map","/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise, SuppressedError, Symbol */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\r\n    function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\r\n    var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\r\n    var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\r\n    var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\r\n    var _, done = false;\r\n    for (var i = decorators.length - 1; i >= 0; i--) {\r\n        var context = {};\r\n        for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\r\n        for (var p in contextIn.access) context.access[p] = contextIn.access[p];\r\n        context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\r\n        var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\r\n        if (kind === \"accessor\") {\r\n            if (result === void 0) continue;\r\n            if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\r\n            if (_ = accept(result.get)) descriptor.get = _;\r\n            if (_ = accept(result.set)) descriptor.set = _;\r\n            if (_ = accept(result.init)) initializers.unshift(_);\r\n        }\r\n        else if (_ = accept(result)) {\r\n            if (kind === \"field\") initializers.unshift(_);\r\n            else descriptor[key] = _;\r\n        }\r\n    }\r\n    if (target) Object.defineProperty(target, contextIn.name, descriptor);\r\n    done = true;\r\n};\r\n\r\nexport function __runInitializers(thisArg, initializers, value) {\r\n    var useValue = arguments.length > 2;\r\n    for (var i = 0; i < initializers.length; i++) {\r\n        value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\r\n    }\r\n    return useValue ? value : void 0;\r\n};\r\n\r\nexport function __propKey(x) {\r\n    return typeof x === \"symbol\" ? x : \"\".concat(x);\r\n};\r\n\r\nexport function __setFunctionName(f, name, prefix) {\r\n    if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\r\n    return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\r\n};\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n        desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n\r\nexport function __classPrivateFieldIn(state, receiver) {\r\n    if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\r\n    return typeof state === \"function\" ? receiver === state : state.has(receiver);\r\n}\r\n\r\nexport function __addDisposableResource(env, value, async) {\r\n    if (value !== null && value !== void 0) {\r\n        if (typeof value !== \"object\") throw new TypeError(\"Object expected.\");\r\n        var dispose;\r\n        if (async) {\r\n            if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\r\n            dispose = value[Symbol.asyncDispose];\r\n        }\r\n        if (dispose === void 0) {\r\n            if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\r\n            dispose = value[Symbol.dispose];\r\n        }\r\n        if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\r\n        env.stack.push({ value: value, dispose: dispose, async: async });\r\n    }\r\n    else if (async) {\r\n        env.stack.push({ async: true });\r\n    }\r\n    return value;\r\n}\r\n\r\nvar _SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\r\n    var e = new Error(message);\r\n    return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\r\n};\r\n\r\nexport function __disposeResources(env) {\r\n    function fail(e) {\r\n        env.error = env.hasError ? new _SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\r\n        env.hasError = true;\r\n    }\r\n    function next() {\r\n        while (env.stack.length) {\r\n            var rec = env.stack.pop();\r\n            try {\r\n                var result = rec.dispose && rec.dispose.call(rec.value);\r\n                if (rec.async) return Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\r\n            }\r\n            catch (e) {\r\n                fail(e);\r\n            }\r\n        }\r\n        if (env.hasError) throw env.error;\r\n    }\r\n    return next();\r\n}\r\n\r\nexport default {\r\n    __extends,\r\n    __assign,\r\n    __rest,\r\n    __decorate,\r\n    __param,\r\n    __metadata,\r\n    __awaiter,\r\n    __generator,\r\n    __createBinding,\r\n    __exportStar,\r\n    __values,\r\n    __read,\r\n    __spread,\r\n    __spreadArrays,\r\n    __spreadArray,\r\n    __await,\r\n    __asyncGenerator,\r\n    __asyncDelegator,\r\n    __asyncValues,\r\n    __makeTemplateObject,\r\n    __importStar,\r\n    __importDefault,\r\n    __classPrivateFieldGet,\r\n    __classPrivateFieldSet,\r\n    __classPrivateFieldIn,\r\n    __addDisposableResource,\r\n    __disposeResources,\r\n};\r\n","import { __assign } from \"tslib\";\nimport { SENSITIVE_STRING, } from \"@aws-sdk/smithy-client\";\nexport var BadRequestException;\n(function (BadRequestException) {\n    BadRequestException.filterSensitiveLog = function (obj) { return (__assign({}, obj)); };\n})(BadRequestException || (BadRequestException = {}));\nexport var ConflictException;\n(function (ConflictException) {\n    ConflictException.filterSensitiveLog = function (obj) { return (__assign({}, obj)); };\n})(ConflictException || (ConflictException = {}));\nexport var DeleteSessionRequest;\n(function (DeleteSessionRequest) {\n    DeleteSessionRequest.filterSensitiveLog = function (obj) { return (__assign({}, obj)); };\n})(DeleteSessionRequest || (DeleteSessionRequest = {}));\nexport var DeleteSessionResponse;\n(function (DeleteSessionResponse) {\n    DeleteSessionResponse.filterSensitiveLog = function (obj) { return (__assign({}, obj)); };\n})(DeleteSessionResponse || (DeleteSessionResponse = {}));\nexport var InternalFailureException;\n(function (InternalFailureException) {\n    InternalFailureException.filterSensitiveLog = function (obj) { return (__assign({}, obj)); };\n})(InternalFailureException || (InternalFailureException = {}));\nexport var LimitExceededException;\n(function (LimitExceededException) {\n    LimitExceededException.filterSensitiveLog = function (obj) { return (__assign({}, obj)); };\n})(LimitExceededException || (LimitExceededException = {}));\nexport var NotFoundException;\n(function (NotFoundException) {\n    NotFoundException.filterSensitiveLog = function (obj) { return (__assign({}, obj)); };\n})(NotFoundException || (NotFoundException = {}));\nexport var GetSessionRequest;\n(function (GetSessionRequest) {\n    GetSessionRequest.filterSensitiveLog = function (obj) { return (__assign({}, obj)); };\n})(GetSessionRequest || (GetSessionRequest = {}));\nexport var FulfillmentState;\n(function (FulfillmentState) {\n    FulfillmentState[\"FAILED\"] = \"Failed\";\n    FulfillmentState[\"FULFILLED\"] = \"Fulfilled\";\n    FulfillmentState[\"READY_FOR_FULFILLMENT\"] = \"ReadyForFulfillment\";\n})(FulfillmentState || (FulfillmentState = {}));\nexport var MessageFormatType;\n(function (MessageFormatType) {\n    MessageFormatType[\"COMPOSITE\"] = \"Composite\";\n    MessageFormatType[\"CUSTOM_PAYLOAD\"] = \"CustomPayload\";\n    MessageFormatType[\"PLAIN_TEXT\"] = \"PlainText\";\n    MessageFormatType[\"SSML\"] = \"SSML\";\n})(MessageFormatType || (MessageFormatType = {}));\nexport var DialogActionType;\n(function (DialogActionType) {\n    DialogActionType[\"CLOSE\"] = \"Close\";\n    DialogActionType[\"CONFIRM_INTENT\"] = \"ConfirmIntent\";\n    DialogActionType[\"DELEGATE\"] = \"Delegate\";\n    DialogActionType[\"ELICIT_INTENT\"] = \"ElicitIntent\";\n    DialogActionType[\"ELICIT_SLOT\"] = \"ElicitSlot\";\n})(DialogActionType || (DialogActionType = {}));\nexport var DialogAction;\n(function (DialogAction) {\n    DialogAction.filterSensitiveLog = function (obj) { return (__assign(__assign(__assign({}, obj), (obj.slots && { slots: SENSITIVE_STRING })), (obj.message && { message: SENSITIVE_STRING }))); };\n})(DialogAction || (DialogAction = {}));\nexport var ConfirmationStatus;\n(function (ConfirmationStatus) {\n    ConfirmationStatus[\"CONFIRMED\"] = \"Confirmed\";\n    ConfirmationStatus[\"DENIED\"] = \"Denied\";\n    ConfirmationStatus[\"NONE\"] = \"None\";\n})(ConfirmationStatus || (ConfirmationStatus = {}));\nexport var IntentSummary;\n(function (IntentSummary) {\n    IntentSummary.filterSensitiveLog = function (obj) { return (__assign(__assign({}, obj), (obj.slots && { slots: SENSITIVE_STRING }))); };\n})(IntentSummary || (IntentSummary = {}));\nexport var GetSessionResponse;\n(function (GetSessionResponse) {\n    GetSessionResponse.filterSensitiveLog = function (obj) { return (__assign(__assign(__assign(__assign({}, obj), (obj.dialogAction && { dialogAction: DialogAction.filterSensitiveLog(obj.dialogAction) })), (obj.recentIntentSummaryView && {\n        recentIntentSummaryView: obj.recentIntentSummaryView.map(function (item) { return IntentSummary.filterSensitiveLog(item); }),\n    })), (obj.sessionAttributes && { sessionAttributes: SENSITIVE_STRING }))); };\n})(GetSessionResponse || (GetSessionResponse = {}));\nexport var BadGatewayException;\n(function (BadGatewayException) {\n    BadGatewayException.filterSensitiveLog = function (obj) { return (__assign({}, obj)); };\n})(BadGatewayException || (BadGatewayException = {}));\nexport var DependencyFailedException;\n(function (DependencyFailedException) {\n    DependencyFailedException.filterSensitiveLog = function (obj) { return (__assign({}, obj)); };\n})(DependencyFailedException || (DependencyFailedException = {}));\nexport var LoopDetectedException;\n(function (LoopDetectedException) {\n    LoopDetectedException.filterSensitiveLog = function (obj) { return (__assign({}, obj)); };\n})(LoopDetectedException || (LoopDetectedException = {}));\nexport var NotAcceptableException;\n(function (NotAcceptableException) {\n    NotAcceptableException.filterSensitiveLog = function (obj) { return (__assign({}, obj)); };\n})(NotAcceptableException || (NotAcceptableException = {}));\nexport var PostContentRequest;\n(function (PostContentRequest) {\n    PostContentRequest.filterSensitiveLog = function (obj) { return (__assign(__assign(__assign({}, obj), (obj.requestAttributes && { requestAttributes: SENSITIVE_STRING })), (obj.sessionAttributes && { sessionAttributes: SENSITIVE_STRING }))); };\n})(PostContentRequest || (PostContentRequest = {}));\nexport var DialogState;\n(function (DialogState) {\n    DialogState[\"CONFIRM_INTENT\"] = \"ConfirmIntent\";\n    DialogState[\"ELICIT_INTENT\"] = \"ElicitIntent\";\n    DialogState[\"ELICIT_SLOT\"] = \"ElicitSlot\";\n    DialogState[\"FAILED\"] = \"Failed\";\n    DialogState[\"FULFILLED\"] = \"Fulfilled\";\n    DialogState[\"READY_FOR_FULFILLMENT\"] = \"ReadyForFulfillment\";\n})(DialogState || (DialogState = {}));\nexport var PostContentResponse;\n(function (PostContentResponse) {\n    PostContentResponse.filterSensitiveLog = function (obj) { return (__assign(__assign({}, obj), (obj.message && { message: SENSITIVE_STRING }))); };\n})(PostContentResponse || (PostContentResponse = {}));\nexport var RequestTimeoutException;\n(function (RequestTimeoutException) {\n    RequestTimeoutException.filterSensitiveLog = function (obj) { return (__assign({}, obj)); };\n})(RequestTimeoutException || (RequestTimeoutException = {}));\nexport var UnsupportedMediaTypeException;\n(function (UnsupportedMediaTypeException) {\n    UnsupportedMediaTypeException.filterSensitiveLog = function (obj) { return (__assign({}, obj)); };\n})(UnsupportedMediaTypeException || (UnsupportedMediaTypeException = {}));\nexport var PostTextRequest;\n(function (PostTextRequest) {\n    PostTextRequest.filterSensitiveLog = function (obj) { return (__assign(__assign(__assign(__assign({}, obj), (obj.requestAttributes && { requestAttributes: SENSITIVE_STRING })), (obj.inputText && { inputText: SENSITIVE_STRING })), (obj.sessionAttributes && { sessionAttributes: SENSITIVE_STRING }))); };\n})(PostTextRequest || (PostTextRequest = {}));\nexport var IntentConfidence;\n(function (IntentConfidence) {\n    IntentConfidence.filterSensitiveLog = function (obj) { return (__assign({}, obj)); };\n})(IntentConfidence || (IntentConfidence = {}));\nexport var PredictedIntent;\n(function (PredictedIntent) {\n    PredictedIntent.filterSensitiveLog = function (obj) { return (__assign(__assign({}, obj), (obj.slots && { slots: SENSITIVE_STRING }))); };\n})(PredictedIntent || (PredictedIntent = {}));\nexport var ContentType;\n(function (ContentType) {\n    ContentType[\"GENERIC\"] = \"application/vnd.amazonaws.card.generic\";\n})(ContentType || (ContentType = {}));\nexport var Button;\n(function (Button) {\n    Button.filterSensitiveLog = function (obj) { return (__assign({}, obj)); };\n})(Button || (Button = {}));\nexport var GenericAttachment;\n(function (GenericAttachment) {\n    GenericAttachment.filterSensitiveLog = function (obj) { return (__assign({}, obj)); };\n})(GenericAttachment || (GenericAttachment = {}));\nexport var ResponseCard;\n(function (ResponseCard) {\n    ResponseCard.filterSensitiveLog = function (obj) { return (__assign({}, obj)); };\n})(ResponseCard || (ResponseCard = {}));\nexport var SentimentResponse;\n(function (SentimentResponse) {\n    SentimentResponse.filterSensitiveLog = function (obj) { return (__assign({}, obj)); };\n})(SentimentResponse || (SentimentResponse = {}));\nexport var PostTextResponse;\n(function (PostTextResponse) {\n    PostTextResponse.filterSensitiveLog = function (obj) { return (__assign(__assign(__assign(__assign(__assign({}, obj), (obj.alternativeIntents && {\n        alternativeIntents: obj.alternativeIntents.map(function (item) { return PredictedIntent.filterSensitiveLog(item); }),\n    })), (obj.message && { message: SENSITIVE_STRING })), (obj.sessionAttributes && { sessionAttributes: SENSITIVE_STRING })), (obj.slots && { slots: SENSITIVE_STRING }))); };\n})(PostTextResponse || (PostTextResponse = {}));\nexport var PutSessionRequest;\n(function (PutSessionRequest) {\n    PutSessionRequest.filterSensitiveLog = function (obj) { return (__assign(__assign(__assign(__assign({}, obj), (obj.dialogAction && { dialogAction: DialogAction.filterSensitiveLog(obj.dialogAction) })), (obj.recentIntentSummaryView && {\n        recentIntentSummaryView: obj.recentIntentSummaryView.map(function (item) { return IntentSummary.filterSensitiveLog(item); }),\n    })), (obj.sessionAttributes && { sessionAttributes: SENSITIVE_STRING }))); };\n})(PutSessionRequest || (PutSessionRequest = {}));\nexport var PutSessionResponse;\n(function (PutSessionResponse) {\n    PutSessionResponse.filterSensitiveLog = function (obj) { return (__assign(__assign({}, obj), (obj.message && { message: SENSITIVE_STRING }))); };\n})(PutSessionResponse || (PutSessionResponse = {}));\n//# sourceMappingURL=models_0.js.map","// Partition default templates\nvar AWS_TEMPLATE = \"runtime.lex.{region}.amazonaws.com\";\nvar AWS_CN_TEMPLATE = \"runtime.lex.{region}.amazonaws.com.cn\";\nvar AWS_ISO_TEMPLATE = \"runtime.lex.{region}.c2s.ic.gov\";\nvar AWS_ISO_B_TEMPLATE = \"runtime.lex.{region}.sc2s.sgov.gov\";\nvar AWS_US_GOV_TEMPLATE = \"runtime.lex.{region}.amazonaws.com\";\n// Partition regions\nvar AWS_REGIONS = new Set([\n    \"ap-east-1\",\n    \"ap-northeast-1\",\n    \"ap-northeast-2\",\n    \"ap-south-1\",\n    \"ap-southeast-1\",\n    \"ap-southeast-2\",\n    \"ca-central-1\",\n    \"eu-central-1\",\n    \"eu-north-1\",\n    \"eu-west-1\",\n    \"eu-west-2\",\n    \"eu-west-3\",\n    \"me-south-1\",\n    \"sa-east-1\",\n    \"us-east-1\",\n    \"us-east-2\",\n    \"us-west-1\",\n    \"us-west-2\",\n]);\nvar AWS_CN_REGIONS = new Set([\"cn-north-1\", \"cn-northwest-1\"]);\nvar AWS_ISO_REGIONS = new Set([\"us-iso-east-1\"]);\nvar AWS_ISO_B_REGIONS = new Set([\"us-isob-east-1\"]);\nvar AWS_US_GOV_REGIONS = new Set([\"us-gov-east-1\", \"us-gov-west-1\"]);\nexport var defaultRegionInfoProvider = function (region, options) {\n    var regionInfo = undefined;\n    switch (region) {\n        // First, try to match exact region names.\n        case \"eu-west-1\":\n            regionInfo = {\n                hostname: \"runtime.lex.eu-west-1.amazonaws.com\",\n                partition: \"aws\",\n                signingService: \"lex\",\n            };\n            break;\n        case \"us-east-1\":\n            regionInfo = {\n                hostname: \"runtime.lex.us-east-1.amazonaws.com\",\n                partition: \"aws\",\n                signingService: \"lex\",\n            };\n            break;\n        case \"us-west-2\":\n            regionInfo = {\n                hostname: \"runtime.lex.us-west-2.amazonaws.com\",\n                partition: \"aws\",\n                signingService: \"lex\",\n            };\n            break;\n        // Next, try to match partition endpoints.\n        default:\n            if (AWS_REGIONS.has(region)) {\n                regionInfo = {\n                    hostname: AWS_TEMPLATE.replace(\"{region}\", region),\n                    partition: \"aws\",\n                    signingService: \"lex\",\n                };\n            }\n            if (AWS_CN_REGIONS.has(region)) {\n                regionInfo = {\n                    hostname: AWS_CN_TEMPLATE.replace(\"{region}\", region),\n                    partition: \"aws-cn\",\n                };\n            }\n            if (AWS_ISO_REGIONS.has(region)) {\n                regionInfo = {\n                    hostname: AWS_ISO_TEMPLATE.replace(\"{region}\", region),\n                    partition: \"aws-iso\",\n                };\n            }\n            if (AWS_ISO_B_REGIONS.has(region)) {\n                regionInfo = {\n                    hostname: AWS_ISO_B_TEMPLATE.replace(\"{region}\", region),\n                    partition: \"aws-iso-b\",\n                };\n            }\n            if (AWS_US_GOV_REGIONS.has(region)) {\n                regionInfo = {\n                    hostname: AWS_US_GOV_TEMPLATE.replace(\"{region}\", region),\n                    partition: \"aws-us-gov\",\n                };\n            }\n            // Finally, assume it's an AWS partition endpoint.\n            if (regionInfo === undefined) {\n                regionInfo = {\n                    hostname: AWS_TEMPLATE.replace(\"{region}\", region),\n                    partition: \"aws\",\n                    signingService: \"lex\",\n                };\n            }\n    }\n    return Promise.resolve(regionInfo);\n};\n//# sourceMappingURL=endpoints.js.map","import { __assign } from \"tslib\";\nimport packageInfo from \"./package.json\";\nimport { Sha256 } from \"@aws-crypto/sha256-browser\";\nimport { FetchHttpHandler, streamCollector } from \"@aws-sdk/fetch-http-handler\";\nimport { invalidFunction } from \"@aws-sdk/invalid-dependency\";\nimport { DEFAULT_MAX_ATTEMPTS } from \"@aws-sdk/middleware-retry\";\nimport { parseUrl } from \"@aws-sdk/url-parser-browser\";\nimport { fromBase64, toBase64 } from \"@aws-sdk/util-base64-browser\";\nimport { calculateBodyLength } from \"@aws-sdk/util-body-length-browser\";\nimport { defaultUserAgent } from \"@aws-sdk/util-user-agent-browser\";\nimport { fromUtf8, toUtf8 } from \"@aws-sdk/util-utf8-browser\";\nimport { ClientSharedValues } from \"./runtimeConfig.shared\";\nexport var ClientDefaultValues = __assign(__assign({}, ClientSharedValues), { runtime: \"browser\", base64Decoder: fromBase64, base64Encoder: toBase64, bodyLengthChecker: calculateBodyLength, credentialDefaultProvider: invalidFunction(\"Credential is missing\"), defaultUserAgent: defaultUserAgent(packageInfo.name, packageInfo.version), maxAttempts: DEFAULT_MAX_ATTEMPTS, region: invalidFunction(\"Region is missing\"), requestHandler: new FetchHttpHandler(), sha256: Sha256, streamCollector: streamCollector, urlParser: parseUrl, utf8Decoder: fromUtf8, utf8Encoder: toUtf8 });\n//# sourceMappingURL=runtimeConfig.browser.js.map","import { defaultRegionInfoProvider } from \"./endpoints\";\nexport var ClientSharedValues = {\n    apiVersion: \"2016-11-28\",\n    disableHostPrefix: false,\n    logger: {},\n    regionInfoProvider: defaultRegionInfoProvider,\n    signingName: \"lex\",\n};\n//# sourceMappingURL=runtimeConfig.shared.js.map","import { __assign, __extends } from \"tslib\";\nimport { ClientDefaultValues as __ClientDefaultValues } from \"./runtimeConfig\";\nimport { resolveEndpointsConfig, resolveRegionConfig, } from \"@aws-sdk/config-resolver\";\nimport { getContentLengthPlugin } from \"@aws-sdk/middleware-content-length\";\nimport { getHostHeaderPlugin, resolveHostHeaderConfig, } from \"@aws-sdk/middleware-host-header\";\nimport { getLoggerPlugin } from \"@aws-sdk/middleware-logger\";\nimport { getRetryPlugin, resolveRetryConfig } from \"@aws-sdk/middleware-retry\";\nimport { getAwsAuthPlugin, resolveAwsAuthConfig, } from \"@aws-sdk/middleware-signing\";\nimport { getUserAgentPlugin, resolveUserAgentConfig, } from \"@aws-sdk/middleware-user-agent\";\nimport { Client as __Client, } from \"@aws-sdk/smithy-client\";\n/**\n * <p>Amazon Lex provides both build and runtime endpoints. Each endpoint provides a set of\n *       operations (API). Your conversational bot uses the runtime API to understand user utterances\n *       (user input text or voice). For example, suppose a user says \"I want pizza\", your bot sends\n *       this input to Amazon Lex using the runtime API. Amazon Lex recognizes that the user request is\n *       for the OrderPizza intent (one of the intents defined in the bot). Then Amazon Lex engages in\n *       user conversation on behalf of the bot to elicit required information (slot values, such as\n *       pizza size and crust type), and then performs fulfillment activity (that you configured when\n *       you created the bot). You use the build-time API to create and manage your Amazon Lex bot. For\n *       a list of build-time operations, see the build-time API, . </p>\n */\nvar LexRuntimeServiceClient = /** @class */ (function (_super) {\n    __extends(LexRuntimeServiceClient, _super);\n    function LexRuntimeServiceClient(configuration) {\n        var _this = this;\n        var _config_0 = __assign(__assign({}, __ClientDefaultValues), configuration);\n        var _config_1 = resolveRegionConfig(_config_0);\n        var _config_2 = resolveEndpointsConfig(_config_1);\n        var _config_3 = resolveAwsAuthConfig(_config_2);\n        var _config_4 = resolveRetryConfig(_config_3);\n        var _config_5 = resolveUserAgentConfig(_config_4);\n        var _config_6 = resolveHostHeaderConfig(_config_5);\n        _this = _super.call(this, _config_6) || this;\n        _this.config = _config_6;\n        _this.middlewareStack.use(getAwsAuthPlugin(_this.config));\n        _this.middlewareStack.use(getRetryPlugin(_this.config));\n        _this.middlewareStack.use(getUserAgentPlugin(_this.config));\n        _this.middlewareStack.use(getContentLengthPlugin(_this.config));\n        _this.middlewareStack.use(getHostHeaderPlugin(_this.config));\n        _this.middlewareStack.use(getLoggerPlugin(_this.config));\n        return _this;\n    }\n    LexRuntimeServiceClient.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n    };\n    return LexRuntimeServiceClient;\n}(__Client));\nexport { LexRuntimeServiceClient };\n//# sourceMappingURL=LexRuntimeServiceClient.js.map","import { __assign, __awaiter, __generator, __read } from \"tslib\";\nimport { HttpRequest as __HttpRequest } from \"@aws-sdk/protocol-http\";\nimport { LazyJsonString as __LazyJsonString, extendedEncodeURIComponent as __extendedEncodeURIComponent, } from \"@aws-sdk/smithy-client\";\nexport var serializeAws_restJson1DeleteSessionCommand = function (input, context) { return __awaiter(void 0, void 0, void 0, function () {\n    var headers, resolvedPath, labelValue, labelValue, labelValue, body, _a, hostname, _b, protocol, port;\n    return __generator(this, function (_c) {\n        switch (_c.label) {\n            case 0:\n                headers = {\n                    \"Content-Type\": \"\",\n                };\n                resolvedPath = \"/bot/{botName}/alias/{botAlias}/user/{userId}/session\";\n                if (input.botAlias !== undefined) {\n                    labelValue = input.botAlias;\n                    if (labelValue.length <= 0) {\n                        throw new Error(\"Empty value provided for input HTTP label: botAlias.\");\n                    }\n                    resolvedPath = resolvedPath.replace(\"{botAlias}\", __extendedEncodeURIComponent(labelValue));\n                }\n                else {\n                    throw new Error(\"No value provided for input HTTP label: botAlias.\");\n                }\n                if (input.userId !== undefined) {\n                    labelValue = input.userId;\n                    if (labelValue.length <= 0) {\n                        throw new Error(\"Empty value provided for input HTTP label: userId.\");\n                    }\n                    resolvedPath = resolvedPath.replace(\"{userId}\", __extendedEncodeURIComponent(labelValue));\n                }\n                else {\n                    throw new Error(\"No value provided for input HTTP label: userId.\");\n                }\n                if (input.botName !== undefined) {\n                    labelValue = input.botName;\n                    if (labelValue.length <= 0) {\n                        throw new Error(\"Empty value provided for input HTTP label: botName.\");\n                    }\n                    resolvedPath = resolvedPath.replace(\"{botName}\", __extendedEncodeURIComponent(labelValue));\n                }\n                else {\n                    throw new Error(\"No value provided for input HTTP label: botName.\");\n                }\n                return [4 /*yield*/, context.endpoint()];\n            case 1:\n                _a = _c.sent(), hostname = _a.hostname, _b = _a.protocol, protocol = _b === void 0 ? \"https\" : _b, port = _a.port;\n                return [2 /*return*/, new __HttpRequest({\n                        protocol: protocol,\n                        hostname: hostname,\n                        port: port,\n                        method: \"DELETE\",\n                        headers: headers,\n                        path: resolvedPath,\n                        body: body,\n                    })];\n        }\n    });\n}); };\nexport var serializeAws_restJson1GetSessionCommand = function (input, context) { return __awaiter(void 0, void 0, void 0, function () {\n    var headers, resolvedPath, labelValue, labelValue, labelValue, query, body, _a, hostname, _b, protocol, port;\n    return __generator(this, function (_c) {\n        switch (_c.label) {\n            case 0:\n                headers = {\n                    \"Content-Type\": \"\",\n                };\n                resolvedPath = \"/bot/{botName}/alias/{botAlias}/user/{userId}/session\";\n                if (input.botAlias !== undefined) {\n                    labelValue = input.botAlias;\n                    if (labelValue.length <= 0) {\n                        throw new Error(\"Empty value provided for input HTTP label: botAlias.\");\n                    }\n                    resolvedPath = resolvedPath.replace(\"{botAlias}\", __extendedEncodeURIComponent(labelValue));\n                }\n                else {\n                    throw new Error(\"No value provided for input HTTP label: botAlias.\");\n                }\n                if (input.userId !== undefined) {\n                    labelValue = input.userId;\n                    if (labelValue.length <= 0) {\n                        throw new Error(\"Empty value provided for input HTTP label: userId.\");\n                    }\n                    resolvedPath = resolvedPath.replace(\"{userId}\", __extendedEncodeURIComponent(labelValue));\n                }\n                else {\n                    throw new Error(\"No value provided for input HTTP label: userId.\");\n                }\n                if (input.botName !== undefined) {\n                    labelValue = input.botName;\n                    if (labelValue.length <= 0) {\n                        throw new Error(\"Empty value provided for input HTTP label: botName.\");\n                    }\n                    resolvedPath = resolvedPath.replace(\"{botName}\", __extendedEncodeURIComponent(labelValue));\n                }\n                else {\n                    throw new Error(\"No value provided for input HTTP label: botName.\");\n                }\n                query = __assign({}, (input.checkpointLabelFilter !== undefined && { checkpointLabelFilter: input.checkpointLabelFilter }));\n                return [4 /*yield*/, context.endpoint()];\n            case 1:\n                _a = _c.sent(), hostname = _a.hostname, _b = _a.protocol, protocol = _b === void 0 ? \"https\" : _b, port = _a.port;\n                return [2 /*return*/, new __HttpRequest({\n                        protocol: protocol,\n                        hostname: hostname,\n                        port: port,\n                        method: \"GET\",\n                        headers: headers,\n                        path: resolvedPath,\n                        query: query,\n                        body: body,\n                    })];\n        }\n    });\n}); };\nexport var serializeAws_restJson1PostContentCommand = function (input, context) { return __awaiter(void 0, void 0, void 0, function () {\n    var headers, resolvedPath, labelValue, labelValue, labelValue, body, _a, hostname, _b, protocol, port;\n    return __generator(this, function (_c) {\n        switch (_c.label) {\n            case 0:\n                headers = __assign(__assign(__assign(__assign({ \"Content-Type\": \"application/octet-stream\", \"x-amz-content-sha256\": \"UNSIGNED-PAYLOAD\" }, (isSerializableHeaderValue(input.requestAttributes) && {\n                    \"x-amz-lex-request-attributes\": __LazyJsonString.fromObject(input.requestAttributes),\n                })), (isSerializableHeaderValue(input.sessionAttributes) && {\n                    \"x-amz-lex-session-attributes\": __LazyJsonString.fromObject(input.sessionAttributes),\n                })), (isSerializableHeaderValue(input.contentType) && { \"Content-Type\": input.contentType })), (isSerializableHeaderValue(input.accept) && { Accept: input.accept }));\n                resolvedPath = \"/bot/{botName}/alias/{botAlias}/user/{userId}/content\";\n                if (input.botAlias !== undefined) {\n                    labelValue = input.botAlias;\n                    if (labelValue.length <= 0) {\n                        throw new Error(\"Empty value provided for input HTTP label: botAlias.\");\n                    }\n                    resolvedPath = resolvedPath.replace(\"{botAlias}\", __extendedEncodeURIComponent(labelValue));\n                }\n                else {\n                    throw new Error(\"No value provided for input HTTP label: botAlias.\");\n                }\n                if (input.botName !== undefined) {\n                    labelValue = input.botName;\n                    if (labelValue.length <= 0) {\n                        throw new Error(\"Empty value provided for input HTTP label: botName.\");\n                    }\n                    resolvedPath = resolvedPath.replace(\"{botName}\", __extendedEncodeURIComponent(labelValue));\n                }\n                else {\n                    throw new Error(\"No value provided for input HTTP label: botName.\");\n                }\n                if (input.userId !== undefined) {\n                    labelValue = input.userId;\n                    if (labelValue.length <= 0) {\n                        throw new Error(\"Empty value provided for input HTTP label: userId.\");\n                    }\n                    resolvedPath = resolvedPath.replace(\"{userId}\", __extendedEncodeURIComponent(labelValue));\n                }\n                else {\n                    throw new Error(\"No value provided for input HTTP label: userId.\");\n                }\n                if (input.inputStream !== undefined) {\n                    body = input.inputStream;\n                }\n                return [4 /*yield*/, context.endpoint()];\n            case 1:\n                _a = _c.sent(), hostname = _a.hostname, _b = _a.protocol, protocol = _b === void 0 ? \"https\" : _b, port = _a.port;\n                return [2 /*return*/, new __HttpRequest({\n                        protocol: protocol,\n                        hostname: hostname,\n                        port: port,\n                        method: \"POST\",\n                        headers: headers,\n                        path: resolvedPath,\n                        body: body,\n                    })];\n        }\n    });\n}); };\nexport var serializeAws_restJson1PostTextCommand = function (input, context) { return __awaiter(void 0, void 0, void 0, function () {\n    var headers, resolvedPath, labelValue, labelValue, labelValue, body, _a, hostname, _b, protocol, port;\n    return __generator(this, function (_c) {\n        switch (_c.label) {\n            case 0:\n                headers = {\n                    \"Content-Type\": \"application/json\",\n                };\n                resolvedPath = \"/bot/{botName}/alias/{botAlias}/user/{userId}/text\";\n                if (input.userId !== undefined) {\n                    labelValue = input.userId;\n                    if (labelValue.length <= 0) {\n                        throw new Error(\"Empty value provided for input HTTP label: userId.\");\n                    }\n                    resolvedPath = resolvedPath.replace(\"{userId}\", __extendedEncodeURIComponent(labelValue));\n                }\n                else {\n                    throw new Error(\"No value provided for input HTTP label: userId.\");\n                }\n                if (input.botAlias !== undefined) {\n                    labelValue = input.botAlias;\n                    if (labelValue.length <= 0) {\n                        throw new Error(\"Empty value provided for input HTTP label: botAlias.\");\n                    }\n                    resolvedPath = resolvedPath.replace(\"{botAlias}\", __extendedEncodeURIComponent(labelValue));\n                }\n                else {\n                    throw new Error(\"No value provided for input HTTP label: botAlias.\");\n                }\n                if (input.botName !== undefined) {\n                    labelValue = input.botName;\n                    if (labelValue.length <= 0) {\n                        throw new Error(\"Empty value provided for input HTTP label: botName.\");\n                    }\n                    resolvedPath = resolvedPath.replace(\"{botName}\", __extendedEncodeURIComponent(labelValue));\n                }\n                else {\n                    throw new Error(\"No value provided for input HTTP label: botName.\");\n                }\n                body = JSON.stringify(__assign(__assign(__assign({}, (input.inputText !== undefined && { inputText: input.inputText })), (input.requestAttributes !== undefined && {\n                    requestAttributes: serializeAws_restJson1StringMap(input.requestAttributes, context),\n                })), (input.sessionAttributes !== undefined && {\n                    sessionAttributes: serializeAws_restJson1StringMap(input.sessionAttributes, context),\n                })));\n                return [4 /*yield*/, context.endpoint()];\n            case 1:\n                _a = _c.sent(), hostname = _a.hostname, _b = _a.protocol, protocol = _b === void 0 ? \"https\" : _b, port = _a.port;\n                return [2 /*return*/, new __HttpRequest({\n                        protocol: protocol,\n                        hostname: hostname,\n                        port: port,\n                        method: \"POST\",\n                        headers: headers,\n                        path: resolvedPath,\n                        body: body,\n                    })];\n        }\n    });\n}); };\nexport var serializeAws_restJson1PutSessionCommand = function (input, context) { return __awaiter(void 0, void 0, void 0, function () {\n    var headers, resolvedPath, labelValue, labelValue, labelValue, body, _a, hostname, _b, protocol, port;\n    return __generator(this, function (_c) {\n        switch (_c.label) {\n            case 0:\n                headers = __assign({ \"Content-Type\": \"application/json\" }, (isSerializableHeaderValue(input.accept) && { Accept: input.accept }));\n                resolvedPath = \"/bot/{botName}/alias/{botAlias}/user/{userId}/session\";\n                if (input.userId !== undefined) {\n                    labelValue = input.userId;\n                    if (labelValue.length <= 0) {\n                        throw new Error(\"Empty value provided for input HTTP label: userId.\");\n                    }\n                    resolvedPath = resolvedPath.replace(\"{userId}\", __extendedEncodeURIComponent(labelValue));\n                }\n                else {\n                    throw new Error(\"No value provided for input HTTP label: userId.\");\n                }\n                if (input.botAlias !== undefined) {\n                    labelValue = input.botAlias;\n                    if (labelValue.length <= 0) {\n                        throw new Error(\"Empty value provided for input HTTP label: botAlias.\");\n                    }\n                    resolvedPath = resolvedPath.replace(\"{botAlias}\", __extendedEncodeURIComponent(labelValue));\n                }\n                else {\n                    throw new Error(\"No value provided for input HTTP label: botAlias.\");\n                }\n                if (input.botName !== undefined) {\n                    labelValue = input.botName;\n                    if (labelValue.length <= 0) {\n                        throw new Error(\"Empty value provided for input HTTP label: botName.\");\n                    }\n                    resolvedPath = resolvedPath.replace(\"{botName}\", __extendedEncodeURIComponent(labelValue));\n                }\n                else {\n                    throw new Error(\"No value provided for input HTTP label: botName.\");\n                }\n                body = JSON.stringify(__assign(__assign(__assign({}, (input.dialogAction !== undefined && {\n                    dialogAction: serializeAws_restJson1DialogAction(input.dialogAction, context),\n                })), (input.recentIntentSummaryView !== undefined && {\n                    recentIntentSummaryView: serializeAws_restJson1IntentSummaryList(input.recentIntentSummaryView, context),\n                })), (input.sessionAttributes !== undefined && {\n                    sessionAttributes: serializeAws_restJson1StringMap(input.sessionAttributes, context),\n                })));\n                return [4 /*yield*/, context.endpoint()];\n            case 1:\n                _a = _c.sent(), hostname = _a.hostname, _b = _a.protocol, protocol = _b === void 0 ? \"https\" : _b, port = _a.port;\n                return [2 /*return*/, new __HttpRequest({\n                        protocol: protocol,\n                        hostname: hostname,\n                        port: port,\n                        method: \"POST\",\n                        headers: headers,\n                        path: resolvedPath,\n                        body: body,\n                    })];\n        }\n    });\n}); };\nexport var deserializeAws_restJson1DeleteSessionCommand = function (output, context) { return __awaiter(void 0, void 0, void 0, function () {\n    var contents, data;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0:\n                if (output.statusCode !== 200 && output.statusCode >= 300) {\n                    return [2 /*return*/, deserializeAws_restJson1DeleteSessionCommandError(output, context)];\n                }\n                contents = {\n                    $metadata: deserializeMetadata(output),\n                    botAlias: undefined,\n                    botName: undefined,\n                    sessionId: undefined,\n                    userId: undefined,\n                };\n                return [4 /*yield*/, parseBody(output.body, context)];\n            case 1:\n                data = _a.sent();\n                if (data.botAlias !== undefined && data.botAlias !== null) {\n                    contents.botAlias = data.botAlias;\n                }\n                if (data.botName !== undefined && data.botName !== null) {\n                    contents.botName = data.botName;\n                }\n                if (data.sessionId !== undefined && data.sessionId !== null) {\n                    contents.sessionId = data.sessionId;\n                }\n                if (data.userId !== undefined && data.userId !== null) {\n                    contents.userId = data.userId;\n                }\n                return [2 /*return*/, Promise.resolve(contents)];\n        }\n    });\n}); };\nvar deserializeAws_restJson1DeleteSessionCommandError = function (output, context) { return __awaiter(void 0, void 0, void 0, function () {\n    var parsedOutput, _a, response, errorCode, _b, _c, _d, _e, _f, _g, parsedBody, message;\n    var _h;\n    return __generator(this, function (_j) {\n        switch (_j.label) {\n            case 0:\n                _a = [__assign({}, output)];\n                _h = {};\n                return [4 /*yield*/, parseBody(output.body, context)];\n            case 1:\n                parsedOutput = __assign.apply(void 0, _a.concat([(_h.body = _j.sent(), _h)]));\n                errorCode = \"UnknownError\";\n                errorCode = loadRestJsonErrorCode(output, parsedOutput.body);\n                _b = errorCode;\n                switch (_b) {\n                    case \"BadRequestException\": return [3 /*break*/, 2];\n                    case \"com.amazonaws.lexruntimeservice#BadRequestException\": return [3 /*break*/, 2];\n                    case \"ConflictException\": return [3 /*break*/, 4];\n                    case \"com.amazonaws.lexruntimeservice#ConflictException\": return [3 /*break*/, 4];\n                    case \"InternalFailureException\": return [3 /*break*/, 6];\n                    case \"com.amazonaws.lexruntimeservice#InternalFailureException\": return [3 /*break*/, 6];\n                    case \"LimitExceededException\": return [3 /*break*/, 8];\n                    case \"com.amazonaws.lexruntimeservice#LimitExceededException\": return [3 /*break*/, 8];\n                    case \"NotFoundException\": return [3 /*break*/, 10];\n                    case \"com.amazonaws.lexruntimeservice#NotFoundException\": return [3 /*break*/, 10];\n                }\n                return [3 /*break*/, 12];\n            case 2:\n                _c = [{}];\n                return [4 /*yield*/, deserializeAws_restJson1BadRequestExceptionResponse(parsedOutput, context)];\n            case 3:\n                response = __assign.apply(void 0, [__assign.apply(void 0, _c.concat([(_j.sent())])), { name: errorCode, $metadata: deserializeMetadata(output) }]);\n                return [3 /*break*/, 13];\n            case 4:\n                _d = [{}];\n                return [4 /*yield*/, deserializeAws_restJson1ConflictExceptionResponse(parsedOutput, context)];\n            case 5:\n                response = __assign.apply(void 0, [__assign.apply(void 0, _d.concat([(_j.sent())])), { name: errorCode, $metadata: deserializeMetadata(output) }]);\n                return [3 /*break*/, 13];\n            case 6:\n                _e = [{}];\n                return [4 /*yield*/, deserializeAws_restJson1InternalFailureExceptionResponse(parsedOutput, context)];\n            case 7:\n                response = __assign.apply(void 0, [__assign.apply(void 0, _e.concat([(_j.sent())])), { name: errorCode, $metadata: deserializeMetadata(output) }]);\n                return [3 /*break*/, 13];\n            case 8:\n                _f = [{}];\n                return [4 /*yield*/, deserializeAws_restJson1LimitExceededExceptionResponse(parsedOutput, context)];\n            case 9:\n                response = __assign.apply(void 0, [__assign.apply(void 0, _f.concat([(_j.sent())])), { name: errorCode, $metadata: deserializeMetadata(output) }]);\n                return [3 /*break*/, 13];\n            case 10:\n                _g = [{}];\n                return [4 /*yield*/, deserializeAws_restJson1NotFoundExceptionResponse(parsedOutput, context)];\n            case 11:\n                response = __assign.apply(void 0, [__assign.apply(void 0, _g.concat([(_j.sent())])), { name: errorCode, $metadata: deserializeMetadata(output) }]);\n                return [3 /*break*/, 13];\n            case 12:\n                parsedBody = parsedOutput.body;\n                errorCode = parsedBody.code || parsedBody.Code || errorCode;\n                response = __assign(__assign({}, parsedBody), { name: \"\" + errorCode, message: parsedBody.message || parsedBody.Message || errorCode, $fault: \"client\", $metadata: deserializeMetadata(output) });\n                _j.label = 13;\n            case 13:\n                message = response.message || response.Message || errorCode;\n                response.message = message;\n                delete response.Message;\n                return [2 /*return*/, Promise.reject(Object.assign(new Error(message), response))];\n        }\n    });\n}); };\nexport var deserializeAws_restJson1GetSessionCommand = function (output, context) { return __awaiter(void 0, void 0, void 0, function () {\n    var contents, data;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0:\n                if (output.statusCode !== 200 && output.statusCode >= 300) {\n                    return [2 /*return*/, deserializeAws_restJson1GetSessionCommandError(output, context)];\n                }\n                contents = {\n                    $metadata: deserializeMetadata(output),\n                    dialogAction: undefined,\n                    recentIntentSummaryView: undefined,\n                    sessionAttributes: undefined,\n                    sessionId: undefined,\n                };\n                return [4 /*yield*/, parseBody(output.body, context)];\n            case 1:\n                data = _a.sent();\n                if (data.dialogAction !== undefined && data.dialogAction !== null) {\n                    contents.dialogAction = deserializeAws_restJson1DialogAction(data.dialogAction, context);\n                }\n                if (data.recentIntentSummaryView !== undefined && data.recentIntentSummaryView !== null) {\n                    contents.recentIntentSummaryView = deserializeAws_restJson1IntentSummaryList(data.recentIntentSummaryView, context);\n                }\n                if (data.sessionAttributes !== undefined && data.sessionAttributes !== null) {\n                    contents.sessionAttributes = deserializeAws_restJson1StringMap(data.sessionAttributes, context);\n                }\n                if (data.sessionId !== undefined && data.sessionId !== null) {\n                    contents.sessionId = data.sessionId;\n                }\n                return [2 /*return*/, Promise.resolve(contents)];\n        }\n    });\n}); };\nvar deserializeAws_restJson1GetSessionCommandError = function (output, context) { return __awaiter(void 0, void 0, void 0, function () {\n    var parsedOutput, _a, response, errorCode, _b, _c, _d, _e, _f, parsedBody, message;\n    var _g;\n    return __generator(this, function (_h) {\n        switch (_h.label) {\n            case 0:\n                _a = [__assign({}, output)];\n                _g = {};\n                return [4 /*yield*/, parseBody(output.body, context)];\n            case 1:\n                parsedOutput = __assign.apply(void 0, _a.concat([(_g.body = _h.sent(), _g)]));\n                errorCode = \"UnknownError\";\n                errorCode = loadRestJsonErrorCode(output, parsedOutput.body);\n                _b = errorCode;\n                switch (_b) {\n                    case \"BadRequestException\": return [3 /*break*/, 2];\n                    case \"com.amazonaws.lexruntimeservice#BadRequestException\": return [3 /*break*/, 2];\n                    case \"InternalFailureException\": return [3 /*break*/, 4];\n                    case \"com.amazonaws.lexruntimeservice#InternalFailureException\": return [3 /*break*/, 4];\n                    case \"LimitExceededException\": return [3 /*break*/, 6];\n                    case \"com.amazonaws.lexruntimeservice#LimitExceededException\": return [3 /*break*/, 6];\n                    case \"NotFoundException\": return [3 /*break*/, 8];\n                    case \"com.amazonaws.lexruntimeservice#NotFoundException\": return [3 /*break*/, 8];\n                }\n                return [3 /*break*/, 10];\n            case 2:\n                _c = [{}];\n                return [4 /*yield*/, deserializeAws_restJson1BadRequestExceptionResponse(parsedOutput, context)];\n            case 3:\n                response = __assign.apply(void 0, [__assign.apply(void 0, _c.concat([(_h.sent())])), { name: errorCode, $metadata: deserializeMetadata(output) }]);\n                return [3 /*break*/, 11];\n            case 4:\n                _d = [{}];\n                return [4 /*yield*/, deserializeAws_restJson1InternalFailureExceptionResponse(parsedOutput, context)];\n            case 5:\n                response = __assign.apply(void 0, [__assign.apply(void 0, _d.concat([(_h.sent())])), { name: errorCode, $metadata: deserializeMetadata(output) }]);\n                return [3 /*break*/, 11];\n            case 6:\n                _e = [{}];\n                return [4 /*yield*/, deserializeAws_restJson1LimitExceededExceptionResponse(parsedOutput, context)];\n            case 7:\n                response = __assign.apply(void 0, [__assign.apply(void 0, _e.concat([(_h.sent())])), { name: errorCode, $metadata: deserializeMetadata(output) }]);\n                return [3 /*break*/, 11];\n            case 8:\n                _f = [{}];\n                return [4 /*yield*/, deserializeAws_restJson1NotFoundExceptionResponse(parsedOutput, context)];\n            case 9:\n                response = __assign.apply(void 0, [__assign.apply(void 0, _f.concat([(_h.sent())])), { name: errorCode, $metadata: deserializeMetadata(output) }]);\n                return [3 /*break*/, 11];\n            case 10:\n                parsedBody = parsedOutput.body;\n                errorCode = parsedBody.code || parsedBody.Code || errorCode;\n                response = __assign(__assign({}, parsedBody), { name: \"\" + errorCode, message: parsedBody.message || parsedBody.Message || errorCode, $fault: \"client\", $metadata: deserializeMetadata(output) });\n                _h.label = 11;\n            case 11:\n                message = response.message || response.Message || errorCode;\n                response.message = message;\n                delete response.Message;\n                return [2 /*return*/, Promise.reject(Object.assign(new Error(message), response))];\n        }\n    });\n}); };\nexport var deserializeAws_restJson1PostContentCommand = function (output, context) { return __awaiter(void 0, void 0, void 0, function () {\n    var contents, data;\n    return __generator(this, function (_a) {\n        if (output.statusCode !== 200 && output.statusCode >= 300) {\n            return [2 /*return*/, deserializeAws_restJson1PostContentCommandError(output, context)];\n        }\n        contents = {\n            $metadata: deserializeMetadata(output),\n            alternativeIntents: undefined,\n            audioStream: undefined,\n            botVersion: undefined,\n            contentType: undefined,\n            dialogState: undefined,\n            inputTranscript: undefined,\n            intentName: undefined,\n            message: undefined,\n            messageFormat: undefined,\n            nluIntentConfidence: undefined,\n            sentimentResponse: undefined,\n            sessionAttributes: undefined,\n            sessionId: undefined,\n            slotToElicit: undefined,\n            slots: undefined,\n        };\n        if (output.headers[\"x-amz-lex-alternative-intents\"] !== undefined) {\n            contents.alternativeIntents = new __LazyJsonString(output.headers[\"x-amz-lex-alternative-intents\"]);\n        }\n        if (output.headers[\"x-amz-lex-message-format\"] !== undefined) {\n            contents.messageFormat = output.headers[\"x-amz-lex-message-format\"];\n        }\n        if (output.headers[\"content-type\"] !== undefined) {\n            contents.contentType = output.headers[\"content-type\"];\n        }\n        if (output.headers[\"x-amz-lex-message\"] !== undefined) {\n            contents.message = output.headers[\"x-amz-lex-message\"];\n        }\n        if (output.headers[\"x-amz-lex-bot-version\"] !== undefined) {\n            contents.botVersion = output.headers[\"x-amz-lex-bot-version\"];\n        }\n        if (output.headers[\"x-amz-lex-sentiment\"] !== undefined) {\n            contents.sentimentResponse = output.headers[\"x-amz-lex-sentiment\"];\n        }\n        if (output.headers[\"x-amz-lex-slots\"] !== undefined) {\n            contents.slots = new __LazyJsonString(output.headers[\"x-amz-lex-slots\"]);\n        }\n        if (output.headers[\"x-amz-lex-input-transcript\"] !== undefined) {\n            contents.inputTranscript = output.headers[\"x-amz-lex-input-transcript\"];\n        }\n        if (output.headers[\"x-amz-lex-slot-to-elicit\"] !== undefined) {\n            contents.slotToElicit = output.headers[\"x-amz-lex-slot-to-elicit\"];\n        }\n        if (output.headers[\"x-amz-lex-session-attributes\"] !== undefined) {\n            contents.sessionAttributes = new __LazyJsonString(output.headers[\"x-amz-lex-session-attributes\"]);\n        }\n        if (output.headers[\"x-amz-lex-session-id\"] !== undefined) {\n            contents.sessionId = output.headers[\"x-amz-lex-session-id\"];\n        }\n        if (output.headers[\"x-amz-lex-dialog-state\"] !== undefined) {\n            contents.dialogState = output.headers[\"x-amz-lex-dialog-state\"];\n        }\n        if (output.headers[\"x-amz-lex-intent-name\"] !== undefined) {\n            contents.intentName = output.headers[\"x-amz-lex-intent-name\"];\n        }\n        if (output.headers[\"x-amz-lex-nlu-intent-confidence\"] !== undefined) {\n            contents.nluIntentConfidence = new __LazyJsonString(output.headers[\"x-amz-lex-nlu-intent-confidence\"]);\n        }\n        data = output.body;\n        contents.audioStream = data;\n        return [2 /*return*/, Promise.resolve(contents)];\n    });\n}); };\nvar deserializeAws_restJson1PostContentCommandError = function (output, context) { return __awaiter(void 0, void 0, void 0, function () {\n    var parsedOutput, _a, response, errorCode, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, parsedBody, message;\n    var _p;\n    return __generator(this, function (_q) {\n        switch (_q.label) {\n            case 0:\n                _a = [__assign({}, output)];\n                _p = {};\n                return [4 /*yield*/, parseBody(output.body, context)];\n            case 1:\n                parsedOutput = __assign.apply(void 0, _a.concat([(_p.body = _q.sent(), _p)]));\n                errorCode = \"UnknownError\";\n                errorCode = loadRestJsonErrorCode(output, parsedOutput.body);\n                _b = errorCode;\n                switch (_b) {\n                    case \"BadGatewayException\": return [3 /*break*/, 2];\n                    case \"com.amazonaws.lexruntimeservice#BadGatewayException\": return [3 /*break*/, 2];\n                    case \"BadRequestException\": return [3 /*break*/, 4];\n                    case \"com.amazonaws.lexruntimeservice#BadRequestException\": return [3 /*break*/, 4];\n                    case \"ConflictException\": return [3 /*break*/, 6];\n                    case \"com.amazonaws.lexruntimeservice#ConflictException\": return [3 /*break*/, 6];\n                    case \"DependencyFailedException\": return [3 /*break*/, 8];\n                    case \"com.amazonaws.lexruntimeservice#DependencyFailedException\": return [3 /*break*/, 8];\n                    case \"InternalFailureException\": return [3 /*break*/, 10];\n                    case \"com.amazonaws.lexruntimeservice#InternalFailureException\": return [3 /*break*/, 10];\n                    case \"LimitExceededException\": return [3 /*break*/, 12];\n                    case \"com.amazonaws.lexruntimeservice#LimitExceededException\": return [3 /*break*/, 12];\n                    case \"LoopDetectedException\": return [3 /*break*/, 14];\n                    case \"com.amazonaws.lexruntimeservice#LoopDetectedException\": return [3 /*break*/, 14];\n                    case \"NotAcceptableException\": return [3 /*break*/, 16];\n                    case \"com.amazonaws.lexruntimeservice#NotAcceptableException\": return [3 /*break*/, 16];\n                    case \"NotFoundException\": return [3 /*break*/, 18];\n                    case \"com.amazonaws.lexruntimeservice#NotFoundException\": return [3 /*break*/, 18];\n                    case \"RequestTimeoutException\": return [3 /*break*/, 20];\n                    case \"com.amazonaws.lexruntimeservice#RequestTimeoutException\": return [3 /*break*/, 20];\n                    case \"UnsupportedMediaTypeException\": return [3 /*break*/, 22];\n                    case \"com.amazonaws.lexruntimeservice#UnsupportedMediaTypeException\": return [3 /*break*/, 22];\n                }\n                return [3 /*break*/, 24];\n            case 2:\n                _c = [{}];\n                return [4 /*yield*/, deserializeAws_restJson1BadGatewayExceptionResponse(parsedOutput, context)];\n            case 3:\n                response = __assign.apply(void 0, [__assign.apply(void 0, _c.concat([(_q.sent())])), { name: errorCode, $metadata: deserializeMetadata(output) }]);\n                return [3 /*break*/, 25];\n            case 4:\n                _d = [{}];\n                return [4 /*yield*/, deserializeAws_restJson1BadRequestExceptionResponse(parsedOutput, context)];\n            case 5:\n                response = __assign.apply(void 0, [__assign.apply(void 0, _d.concat([(_q.sent())])), { name: errorCode, $metadata: deserializeMetadata(output) }]);\n                return [3 /*break*/, 25];\n            case 6:\n                _e = [{}];\n                return [4 /*yield*/, deserializeAws_restJson1ConflictExceptionResponse(parsedOutput, context)];\n            case 7:\n                response = __assign.apply(void 0, [__assign.apply(void 0, _e.concat([(_q.sent())])), { name: errorCode, $metadata: deserializeMetadata(output) }]);\n                return [3 /*break*/, 25];\n            case 8:\n                _f = [{}];\n                return [4 /*yield*/, deserializeAws_restJson1DependencyFailedExceptionResponse(parsedOutput, context)];\n            case 9:\n                response = __assign.apply(void 0, [__assign.apply(void 0, _f.concat([(_q.sent())])), { name: errorCode, $metadata: deserializeMetadata(output) }]);\n                return [3 /*break*/, 25];\n            case 10:\n                _g = [{}];\n                return [4 /*yield*/, deserializeAws_restJson1InternalFailureExceptionResponse(parsedOutput, context)];\n            case 11:\n                response = __assign.apply(void 0, [__assign.apply(void 0, _g.concat([(_q.sent())])), { name: errorCode, $metadata: deserializeMetadata(output) }]);\n                return [3 /*break*/, 25];\n            case 12:\n                _h = [{}];\n                return [4 /*yield*/, deserializeAws_restJson1LimitExceededExceptionResponse(parsedOutput, context)];\n            case 13:\n                response = __assign.apply(void 0, [__assign.apply(void 0, _h.concat([(_q.sent())])), { name: errorCode, $metadata: deserializeMetadata(output) }]);\n                return [3 /*break*/, 25];\n            case 14:\n                _j = [{}];\n                return [4 /*yield*/, deserializeAws_restJson1LoopDetectedExceptionResponse(parsedOutput, context)];\n            case 15:\n                response = __assign.apply(void 0, [__assign.apply(void 0, _j.concat([(_q.sent())])), { name: errorCode, $metadata: deserializeMetadata(output) }]);\n                return [3 /*break*/, 25];\n            case 16:\n                _k = [{}];\n                return [4 /*yield*/, deserializeAws_restJson1NotAcceptableExceptionResponse(parsedOutput, context)];\n            case 17:\n                response = __assign.apply(void 0, [__assign.apply(void 0, _k.concat([(_q.sent())])), { name: errorCode, $metadata: deserializeMetadata(output) }]);\n                return [3 /*break*/, 25];\n            case 18:\n                _l = [{}];\n                return [4 /*yield*/, deserializeAws_restJson1NotFoundExceptionResponse(parsedOutput, context)];\n            case 19:\n                response = __assign.apply(void 0, [__assign.apply(void 0, _l.concat([(_q.sent())])), { name: errorCode, $metadata: deserializeMetadata(output) }]);\n                return [3 /*break*/, 25];\n            case 20:\n                _m = [{}];\n                return [4 /*yield*/, deserializeAws_restJson1RequestTimeoutExceptionResponse(parsedOutput, context)];\n            case 21:\n                response = __assign.apply(void 0, [__assign.apply(void 0, _m.concat([(_q.sent())])), { name: errorCode, $metadata: deserializeMetadata(output) }]);\n                return [3 /*break*/, 25];\n            case 22:\n                _o = [{}];\n                return [4 /*yield*/, deserializeAws_restJson1UnsupportedMediaTypeExceptionResponse(parsedOutput, context)];\n            case 23:\n                response = __assign.apply(void 0, [__assign.apply(void 0, _o.concat([(_q.sent())])), { name: errorCode, $metadata: deserializeMetadata(output) }]);\n                return [3 /*break*/, 25];\n            case 24:\n                parsedBody = parsedOutput.body;\n                errorCode = parsedBody.code || parsedBody.Code || errorCode;\n                response = __assign(__assign({}, parsedBody), { name: \"\" + errorCode, message: parsedBody.message || parsedBody.Message || errorCode, $fault: \"client\", $metadata: deserializeMetadata(output) });\n                _q.label = 25;\n            case 25:\n                message = response.message || response.Message || errorCode;\n                response.message = message;\n                delete response.Message;\n                return [2 /*return*/, Promise.reject(Object.assign(new Error(message), response))];\n        }\n    });\n}); };\nexport var deserializeAws_restJson1PostTextCommand = function (output, context) { return __awaiter(void 0, void 0, void 0, function () {\n    var contents, data;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0:\n                if (output.statusCode !== 200 && output.statusCode >= 300) {\n                    return [2 /*return*/, deserializeAws_restJson1PostTextCommandError(output, context)];\n                }\n                contents = {\n                    $metadata: deserializeMetadata(output),\n                    alternativeIntents: undefined,\n                    botVersion: undefined,\n                    dialogState: undefined,\n                    intentName: undefined,\n                    message: undefined,\n                    messageFormat: undefined,\n                    nluIntentConfidence: undefined,\n                    responseCard: undefined,\n                    sentimentResponse: undefined,\n                    sessionAttributes: undefined,\n                    sessionId: undefined,\n                    slotToElicit: undefined,\n                    slots: undefined,\n                };\n                return [4 /*yield*/, parseBody(output.body, context)];\n            case 1:\n                data = _a.sent();\n                if (data.alternativeIntents !== undefined && data.alternativeIntents !== null) {\n                    contents.alternativeIntents = deserializeAws_restJson1IntentList(data.alternativeIntents, context);\n                }\n                if (data.botVersion !== undefined && data.botVersion !== null) {\n                    contents.botVersion = data.botVersion;\n                }\n                if (data.dialogState !== undefined && data.dialogState !== null) {\n                    contents.dialogState = data.dialogState;\n                }\n                if (data.intentName !== undefined && data.intentName !== null) {\n                    contents.intentName = data.intentName;\n                }\n                if (data.message !== undefined && data.message !== null) {\n                    contents.message = data.message;\n                }\n                if (data.messageFormat !== undefined && data.messageFormat !== null) {\n                    contents.messageFormat = data.messageFormat;\n                }\n                if (data.nluIntentConfidence !== undefined && data.nluIntentConfidence !== null) {\n                    contents.nluIntentConfidence = deserializeAws_restJson1IntentConfidence(data.nluIntentConfidence, context);\n                }\n                if (data.responseCard !== undefined && data.responseCard !== null) {\n                    contents.responseCard = deserializeAws_restJson1ResponseCard(data.responseCard, context);\n                }\n                if (data.sentimentResponse !== undefined && data.sentimentResponse !== null) {\n                    contents.sentimentResponse = deserializeAws_restJson1SentimentResponse(data.sentimentResponse, context);\n                }\n                if (data.sessionAttributes !== undefined && data.sessionAttributes !== null) {\n                    contents.sessionAttributes = deserializeAws_restJson1StringMap(data.sessionAttributes, context);\n                }\n                if (data.sessionId !== undefined && data.sessionId !== null) {\n                    contents.sessionId = data.sessionId;\n                }\n                if (data.slotToElicit !== undefined && data.slotToElicit !== null) {\n                    contents.slotToElicit = data.slotToElicit;\n                }\n                if (data.slots !== undefined && data.slots !== null) {\n                    contents.slots = deserializeAws_restJson1StringMap(data.slots, context);\n                }\n                return [2 /*return*/, Promise.resolve(contents)];\n        }\n    });\n}); };\nvar deserializeAws_restJson1PostTextCommandError = function (output, context) { return __awaiter(void 0, void 0, void 0, function () {\n    var parsedOutput, _a, response, errorCode, _b, _c, _d, _e, _f, _g, _h, _j, _k, parsedBody, message;\n    var _l;\n    return __generator(this, function (_m) {\n        switch (_m.label) {\n            case 0:\n                _a = [__assign({}, output)];\n                _l = {};\n                return [4 /*yield*/, parseBody(output.body, context)];\n            case 1:\n                parsedOutput = __assign.apply(void 0, _a.concat([(_l.body = _m.sent(), _l)]));\n                errorCode = \"UnknownError\";\n                errorCode = loadRestJsonErrorCode(output, parsedOutput.body);\n                _b = errorCode;\n                switch (_b) {\n                    case \"BadGatewayException\": return [3 /*break*/, 2];\n                    case \"com.amazonaws.lexruntimeservice#BadGatewayException\": return [3 /*break*/, 2];\n                    case \"BadRequestException\": return [3 /*break*/, 4];\n                    case \"com.amazonaws.lexruntimeservice#BadRequestException\": return [3 /*break*/, 4];\n                    case \"ConflictException\": return [3 /*break*/, 6];\n                    case \"com.amazonaws.lexruntimeservice#ConflictException\": return [3 /*break*/, 6];\n                    case \"DependencyFailedException\": return [3 /*break*/, 8];\n                    case \"com.amazonaws.lexruntimeservice#DependencyFailedException\": return [3 /*break*/, 8];\n                    case \"InternalFailureException\": return [3 /*break*/, 10];\n                    case \"com.amazonaws.lexruntimeservice#InternalFailureException\": return [3 /*break*/, 10];\n                    case \"LimitExceededException\": return [3 /*break*/, 12];\n                    case \"com.amazonaws.lexruntimeservice#LimitExceededException\": return [3 /*break*/, 12];\n                    case \"LoopDetectedException\": return [3 /*break*/, 14];\n                    case \"com.amazonaws.lexruntimeservice#LoopDetectedException\": return [3 /*break*/, 14];\n                    case \"NotFoundException\": return [3 /*break*/, 16];\n                    case \"com.amazonaws.lexruntimeservice#NotFoundException\": return [3 /*break*/, 16];\n                }\n                return [3 /*break*/, 18];\n            case 2:\n                _c = [{}];\n                return [4 /*yield*/, deserializeAws_restJson1BadGatewayExceptionResponse(parsedOutput, context)];\n            case 3:\n                response = __assign.apply(void 0, [__assign.apply(void 0, _c.concat([(_m.sent())])), { name: errorCode, $metadata: deserializeMetadata(output) }]);\n                return [3 /*break*/, 19];\n            case 4:\n                _d = [{}];\n                return [4 /*yield*/, deserializeAws_restJson1BadRequestExceptionResponse(parsedOutput, context)];\n            case 5:\n                response = __assign.apply(void 0, [__assign.apply(void 0, _d.concat([(_m.sent())])), { name: errorCode, $metadata: deserializeMetadata(output) }]);\n                return [3 /*break*/, 19];\n            case 6:\n                _e = [{}];\n                return [4 /*yield*/, deserializeAws_restJson1ConflictExceptionResponse(parsedOutput, context)];\n            case 7:\n                response = __assign.apply(void 0, [__assign.apply(void 0, _e.concat([(_m.sent())])), { name: errorCode, $metadata: deserializeMetadata(output) }]);\n                return [3 /*break*/, 19];\n            case 8:\n                _f = [{}];\n                return [4 /*yield*/, deserializeAws_restJson1DependencyFailedExceptionResponse(parsedOutput, context)];\n            case 9:\n                response = __assign.apply(void 0, [__assign.apply(void 0, _f.concat([(_m.sent())])), { name: errorCode, $metadata: deserializeMetadata(output) }]);\n                return [3 /*break*/, 19];\n            case 10:\n                _g = [{}];\n                return [4 /*yield*/, deserializeAws_restJson1InternalFailureExceptionResponse(parsedOutput, context)];\n            case 11:\n                response = __assign.apply(void 0, [__assign.apply(void 0, _g.concat([(_m.sent())])), { name: errorCode, $metadata: deserializeMetadata(output) }]);\n                return [3 /*break*/, 19];\n            case 12:\n                _h = [{}];\n                return [4 /*yield*/, deserializeAws_restJson1LimitExceededExceptionResponse(parsedOutput, context)];\n            case 13:\n                response = __assign.apply(void 0, [__assign.apply(void 0, _h.concat([(_m.sent())])), { name: errorCode, $metadata: deserializeMetadata(output) }]);\n                return [3 /*break*/, 19];\n            case 14:\n                _j = [{}];\n                return [4 /*yield*/, deserializeAws_restJson1LoopDetectedExceptionResponse(parsedOutput, context)];\n            case 15:\n                response = __assign.apply(void 0, [__assign.apply(void 0, _j.concat([(_m.sent())])), { name: errorCode, $metadata: deserializeMetadata(output) }]);\n                return [3 /*break*/, 19];\n            case 16:\n                _k = [{}];\n                return [4 /*yield*/, deserializeAws_restJson1NotFoundExceptionResponse(parsedOutput, context)];\n            case 17:\n                response = __assign.apply(void 0, [__assign.apply(void 0, _k.concat([(_m.sent())])), { name: errorCode, $metadata: deserializeMetadata(output) }]);\n                return [3 /*break*/, 19];\n            case 18:\n                parsedBody = parsedOutput.body;\n                errorCode = parsedBody.code || parsedBody.Code || errorCode;\n                response = __assign(__assign({}, parsedBody), { name: \"\" + errorCode, message: parsedBody.message || parsedBody.Message || errorCode, $fault: \"client\", $metadata: deserializeMetadata(output) });\n                _m.label = 19;\n            case 19:\n                message = response.message || response.Message || errorCode;\n                response.message = message;\n                delete response.Message;\n                return [2 /*return*/, Promise.reject(Object.assign(new Error(message), response))];\n        }\n    });\n}); };\nexport var deserializeAws_restJson1PutSessionCommand = function (output, context) { return __awaiter(void 0, void 0, void 0, function () {\n    var contents, data;\n    return __generator(this, function (_a) {\n        if (output.statusCode !== 200 && output.statusCode >= 300) {\n            return [2 /*return*/, deserializeAws_restJson1PutSessionCommandError(output, context)];\n        }\n        contents = {\n            $metadata: deserializeMetadata(output),\n            audioStream: undefined,\n            contentType: undefined,\n            dialogState: undefined,\n            intentName: undefined,\n            message: undefined,\n            messageFormat: undefined,\n            sessionAttributes: undefined,\n            sessionId: undefined,\n            slotToElicit: undefined,\n            slots: undefined,\n        };\n        if (output.headers[\"content-type\"] !== undefined) {\n            contents.contentType = output.headers[\"content-type\"];\n        }\n        if (output.headers[\"x-amz-lex-intent-name\"] !== undefined) {\n            contents.intentName = output.headers[\"x-amz-lex-intent-name\"];\n        }\n        if (output.headers[\"x-amz-lex-message-format\"] !== undefined) {\n            contents.messageFormat = output.headers[\"x-amz-lex-message-format\"];\n        }\n        if (output.headers[\"x-amz-lex-session-attributes\"] !== undefined) {\n            contents.sessionAttributes = new __LazyJsonString(output.headers[\"x-amz-lex-session-attributes\"]);\n        }\n        if (output.headers[\"x-amz-lex-session-id\"] !== undefined) {\n            contents.sessionId = output.headers[\"x-amz-lex-session-id\"];\n        }\n        if (output.headers[\"x-amz-lex-slot-to-elicit\"] !== undefined) {\n            contents.slotToElicit = output.headers[\"x-amz-lex-slot-to-elicit\"];\n        }\n        if (output.headers[\"x-amz-lex-slots\"] !== undefined) {\n            contents.slots = new __LazyJsonString(output.headers[\"x-amz-lex-slots\"]);\n        }\n        if (output.headers[\"x-amz-lex-message\"] !== undefined) {\n            contents.message = output.headers[\"x-amz-lex-message\"];\n        }\n        if (output.headers[\"x-amz-lex-dialog-state\"] !== undefined) {\n            contents.dialogState = output.headers[\"x-amz-lex-dialog-state\"];\n        }\n        data = output.body;\n        contents.audioStream = data;\n        return [2 /*return*/, Promise.resolve(contents)];\n    });\n}); };\nvar deserializeAws_restJson1PutSessionCommandError = function (output, context) { return __awaiter(void 0, void 0, void 0, function () {\n    var parsedOutput, _a, response, errorCode, _b, _c, _d, _e, _f, _g, _h, _j, _k, parsedBody, message;\n    var _l;\n    return __generator(this, function (_m) {\n        switch (_m.label) {\n            case 0:\n                _a = [__assign({}, output)];\n                _l = {};\n                return [4 /*yield*/, parseBody(output.body, context)];\n            case 1:\n                parsedOutput = __assign.apply(void 0, _a.concat([(_l.body = _m.sent(), _l)]));\n                errorCode = \"UnknownError\";\n                errorCode = loadRestJsonErrorCode(output, parsedOutput.body);\n                _b = errorCode;\n                switch (_b) {\n                    case \"BadGatewayException\": return [3 /*break*/, 2];\n                    case \"com.amazonaws.lexruntimeservice#BadGatewayException\": return [3 /*break*/, 2];\n                    case \"BadRequestException\": return [3 /*break*/, 4];\n                    case \"com.amazonaws.lexruntimeservice#BadRequestException\": return [3 /*break*/, 4];\n                    case \"ConflictException\": return [3 /*break*/, 6];\n                    case \"com.amazonaws.lexruntimeservice#ConflictException\": return [3 /*break*/, 6];\n                    case \"DependencyFailedException\": return [3 /*break*/, 8];\n                    case \"com.amazonaws.lexruntimeservice#DependencyFailedException\": return [3 /*break*/, 8];\n                    case \"InternalFailureException\": return [3 /*break*/, 10];\n                    case \"com.amazonaws.lexruntimeservice#InternalFailureException\": return [3 /*break*/, 10];\n                    case \"LimitExceededException\": return [3 /*break*/, 12];\n                    case \"com.amazonaws.lexruntimeservice#LimitExceededException\": return [3 /*break*/, 12];\n                    case \"NotAcceptableException\": return [3 /*break*/, 14];\n                    case \"com.amazonaws.lexruntimeservice#NotAcceptableException\": return [3 /*break*/, 14];\n                    case \"NotFoundException\": return [3 /*break*/, 16];\n                    case \"com.amazonaws.lexruntimeservice#NotFoundException\": return [3 /*break*/, 16];\n                }\n                return [3 /*break*/, 18];\n            case 2:\n                _c = [{}];\n                return [4 /*yield*/, deserializeAws_restJson1BadGatewayExceptionResponse(parsedOutput, context)];\n            case 3:\n                response = __assign.apply(void 0, [__assign.apply(void 0, _c.concat([(_m.sent())])), { name: errorCode, $metadata: deserializeMetadata(output) }]);\n                return [3 /*break*/, 19];\n            case 4:\n                _d = [{}];\n                return [4 /*yield*/, deserializeAws_restJson1BadRequestExceptionResponse(parsedOutput, context)];\n            case 5:\n                response = __assign.apply(void 0, [__assign.apply(void 0, _d.concat([(_m.sent())])), { name: errorCode, $metadata: deserializeMetadata(output) }]);\n                return [3 /*break*/, 19];\n            case 6:\n                _e = [{}];\n                return [4 /*yield*/, deserializeAws_restJson1ConflictExceptionResponse(parsedOutput, context)];\n            case 7:\n                response = __assign.apply(void 0, [__assign.apply(void 0, _e.concat([(_m.sent())])), { name: errorCode, $metadata: deserializeMetadata(output) }]);\n                return [3 /*break*/, 19];\n            case 8:\n                _f = [{}];\n                return [4 /*yield*/, deserializeAws_restJson1DependencyFailedExceptionResponse(parsedOutput, context)];\n            case 9:\n                response = __assign.apply(void 0, [__assign.apply(void 0, _f.concat([(_m.sent())])), { name: errorCode, $metadata: deserializeMetadata(output) }]);\n                return [3 /*break*/, 19];\n            case 10:\n                _g = [{}];\n                return [4 /*yield*/, deserializeAws_restJson1InternalFailureExceptionResponse(parsedOutput, context)];\n            case 11:\n                response = __assign.apply(void 0, [__assign.apply(void 0, _g.concat([(_m.sent())])), { name: errorCode, $metadata: deserializeMetadata(output) }]);\n                return [3 /*break*/, 19];\n            case 12:\n                _h = [{}];\n                return [4 /*yield*/, deserializeAws_restJson1LimitExceededExceptionResponse(parsedOutput, context)];\n            case 13:\n                response = __assign.apply(void 0, [__assign.apply(void 0, _h.concat([(_m.sent())])), { name: errorCode, $metadata: deserializeMetadata(output) }]);\n                return [3 /*break*/, 19];\n            case 14:\n                _j = [{}];\n                return [4 /*yield*/, deserializeAws_restJson1NotAcceptableExceptionResponse(parsedOutput, context)];\n            case 15:\n                response = __assign.apply(void 0, [__assign.apply(void 0, _j.concat([(_m.sent())])), { name: errorCode, $metadata: deserializeMetadata(output) }]);\n                return [3 /*break*/, 19];\n            case 16:\n                _k = [{}];\n                return [4 /*yield*/, deserializeAws_restJson1NotFoundExceptionResponse(parsedOutput, context)];\n            case 17:\n                response = __assign.apply(void 0, [__assign.apply(void 0, _k.concat([(_m.sent())])), { name: errorCode, $metadata: deserializeMetadata(output) }]);\n                return [3 /*break*/, 19];\n            case 18:\n                parsedBody = parsedOutput.body;\n                errorCode = parsedBody.code || parsedBody.Code || errorCode;\n                response = __assign(__assign({}, parsedBody), { name: \"\" + errorCode, message: parsedBody.message || parsedBody.Message || errorCode, $fault: \"client\", $metadata: deserializeMetadata(output) });\n                _m.label = 19;\n            case 19:\n                message = response.message || response.Message || errorCode;\n                response.message = message;\n                delete response.Message;\n                return [2 /*return*/, Promise.reject(Object.assign(new Error(message), response))];\n        }\n    });\n}); };\nvar deserializeAws_restJson1BadGatewayExceptionResponse = function (parsedOutput, context) { return __awaiter(void 0, void 0, void 0, function () {\n    var contents, data;\n    return __generator(this, function (_a) {\n        contents = {\n            name: \"BadGatewayException\",\n            $fault: \"server\",\n            $metadata: deserializeMetadata(parsedOutput),\n            Message: undefined,\n        };\n        data = parsedOutput.body;\n        if (data.Message !== undefined && data.Message !== null) {\n            contents.Message = data.Message;\n        }\n        return [2 /*return*/, contents];\n    });\n}); };\nvar deserializeAws_restJson1BadRequestExceptionResponse = function (parsedOutput, context) { return __awaiter(void 0, void 0, void 0, function () {\n    var contents, data;\n    return __generator(this, function (_a) {\n        contents = {\n            name: \"BadRequestException\",\n            $fault: \"client\",\n            $metadata: deserializeMetadata(parsedOutput),\n            message: undefined,\n        };\n        data = parsedOutput.body;\n        if (data.message !== undefined && data.message !== null) {\n            contents.message = data.message;\n        }\n        return [2 /*return*/, contents];\n    });\n}); };\nvar deserializeAws_restJson1ConflictExceptionResponse = function (parsedOutput, context) { return __awaiter(void 0, void 0, void 0, function () {\n    var contents, data;\n    return __generator(this, function (_a) {\n        contents = {\n            name: \"ConflictException\",\n            $fault: \"client\",\n            $metadata: deserializeMetadata(parsedOutput),\n            message: undefined,\n        };\n        data = parsedOutput.body;\n        if (data.message !== undefined && data.message !== null) {\n            contents.message = data.message;\n        }\n        return [2 /*return*/, contents];\n    });\n}); };\nvar deserializeAws_restJson1DependencyFailedExceptionResponse = function (parsedOutput, context) { return __awaiter(void 0, void 0, void 0, function () {\n    var contents, data;\n    return __generator(this, function (_a) {\n        contents = {\n            name: \"DependencyFailedException\",\n            $fault: \"client\",\n            $metadata: deserializeMetadata(parsedOutput),\n            Message: undefined,\n        };\n        data = parsedOutput.body;\n        if (data.Message !== undefined && data.Message !== null) {\n            contents.Message = data.Message;\n        }\n        return [2 /*return*/, contents];\n    });\n}); };\nvar deserializeAws_restJson1InternalFailureExceptionResponse = function (parsedOutput, context) { return __awaiter(void 0, void 0, void 0, function () {\n    var contents, data;\n    return __generator(this, function (_a) {\n        contents = {\n            name: \"InternalFailureException\",\n            $fault: \"server\",\n            $metadata: deserializeMetadata(parsedOutput),\n            message: undefined,\n        };\n        data = parsedOutput.body;\n        if (data.message !== undefined && data.message !== null) {\n            contents.message = data.message;\n        }\n        return [2 /*return*/, contents];\n    });\n}); };\nvar deserializeAws_restJson1LimitExceededExceptionResponse = function (parsedOutput, context) { return __awaiter(void 0, void 0, void 0, function () {\n    var contents, data;\n    return __generator(this, function (_a) {\n        contents = {\n            name: \"LimitExceededException\",\n            $fault: \"client\",\n            $metadata: deserializeMetadata(parsedOutput),\n            message: undefined,\n            retryAfterSeconds: undefined,\n        };\n        if (parsedOutput.headers[\"retry-after\"] !== undefined) {\n            contents.retryAfterSeconds = parsedOutput.headers[\"retry-after\"];\n        }\n        data = parsedOutput.body;\n        if (data.message !== undefined && data.message !== null) {\n            contents.message = data.message;\n        }\n        return [2 /*return*/, contents];\n    });\n}); };\nvar deserializeAws_restJson1LoopDetectedExceptionResponse = function (parsedOutput, context) { return __awaiter(void 0, void 0, void 0, function () {\n    var contents, data;\n    return __generator(this, function (_a) {\n        contents = {\n            name: \"LoopDetectedException\",\n            $fault: \"server\",\n            $metadata: deserializeMetadata(parsedOutput),\n            Message: undefined,\n        };\n        data = parsedOutput.body;\n        if (data.Message !== undefined && data.Message !== null) {\n            contents.Message = data.Message;\n        }\n        return [2 /*return*/, contents];\n    });\n}); };\nvar deserializeAws_restJson1NotAcceptableExceptionResponse = function (parsedOutput, context) { return __awaiter(void 0, void 0, void 0, function () {\n    var contents, data;\n    return __generator(this, function (_a) {\n        contents = {\n            name: \"NotAcceptableException\",\n            $fault: \"client\",\n            $metadata: deserializeMetadata(parsedOutput),\n            message: undefined,\n        };\n        data = parsedOutput.body;\n        if (data.message !== undefined && data.message !== null) {\n            contents.message = data.message;\n        }\n        return [2 /*return*/, contents];\n    });\n}); };\nvar deserializeAws_restJson1NotFoundExceptionResponse = function (parsedOutput, context) { return __awaiter(void 0, void 0, void 0, function () {\n    var contents, data;\n    return __generator(this, function (_a) {\n        contents = {\n            name: \"NotFoundException\",\n            $fault: \"client\",\n            $metadata: deserializeMetadata(parsedOutput),\n            message: undefined,\n        };\n        data = parsedOutput.body;\n        if (data.message !== undefined && data.message !== null) {\n            contents.message = data.message;\n        }\n        return [2 /*return*/, contents];\n    });\n}); };\nvar deserializeAws_restJson1RequestTimeoutExceptionResponse = function (parsedOutput, context) { return __awaiter(void 0, void 0, void 0, function () {\n    var contents, data;\n    return __generator(this, function (_a) {\n        contents = {\n            name: \"RequestTimeoutException\",\n            $fault: \"client\",\n            $metadata: deserializeMetadata(parsedOutput),\n            message: undefined,\n        };\n        data = parsedOutput.body;\n        if (data.message !== undefined && data.message !== null) {\n            contents.message = data.message;\n        }\n        return [2 /*return*/, contents];\n    });\n}); };\nvar deserializeAws_restJson1UnsupportedMediaTypeExceptionResponse = function (parsedOutput, context) { return __awaiter(void 0, void 0, void 0, function () {\n    var contents, data;\n    return __generator(this, function (_a) {\n        contents = {\n            name: \"UnsupportedMediaTypeException\",\n            $fault: \"client\",\n            $metadata: deserializeMetadata(parsedOutput),\n            message: undefined,\n        };\n        data = parsedOutput.body;\n        if (data.message !== undefined && data.message !== null) {\n            contents.message = data.message;\n        }\n        return [2 /*return*/, contents];\n    });\n}); };\nvar serializeAws_restJson1DialogAction = function (input, context) {\n    return __assign(__assign(__assign(__assign(__assign(__assign(__assign({}, (input.fulfillmentState !== undefined && { fulfillmentState: input.fulfillmentState })), (input.intentName !== undefined && { intentName: input.intentName })), (input.message !== undefined && { message: input.message })), (input.messageFormat !== undefined && { messageFormat: input.messageFormat })), (input.slotToElicit !== undefined && { slotToElicit: input.slotToElicit })), (input.slots !== undefined && { slots: serializeAws_restJson1StringMap(input.slots, context) })), (input.type !== undefined && { type: input.type }));\n};\nvar serializeAws_restJson1IntentSummary = function (input, context) {\n    return __assign(__assign(__assign(__assign(__assign(__assign(__assign({}, (input.checkpointLabel !== undefined && { checkpointLabel: input.checkpointLabel })), (input.confirmationStatus !== undefined && { confirmationStatus: input.confirmationStatus })), (input.dialogActionType !== undefined && { dialogActionType: input.dialogActionType })), (input.fulfillmentState !== undefined && { fulfillmentState: input.fulfillmentState })), (input.intentName !== undefined && { intentName: input.intentName })), (input.slotToElicit !== undefined && { slotToElicit: input.slotToElicit })), (input.slots !== undefined && { slots: serializeAws_restJson1StringMap(input.slots, context) }));\n};\nvar serializeAws_restJson1IntentSummaryList = function (input, context) {\n    return input.map(function (entry) { return serializeAws_restJson1IntentSummary(entry, context); });\n};\nvar serializeAws_restJson1StringMap = function (input, context) {\n    return Object.entries(input).reduce(function (acc, _a) {\n        var _b;\n        var _c = __read(_a, 2), key = _c[0], value = _c[1];\n        return (__assign(__assign({}, acc), (_b = {}, _b[key] = value, _b)));\n    }, {});\n};\nvar deserializeAws_restJson1Button = function (output, context) {\n    return {\n        text: output.text !== undefined && output.text !== null ? output.text : undefined,\n        value: output.value !== undefined && output.value !== null ? output.value : undefined,\n    };\n};\nvar deserializeAws_restJson1DialogAction = function (output, context) {\n    return {\n        fulfillmentState: output.fulfillmentState !== undefined && output.fulfillmentState !== null ? output.fulfillmentState : undefined,\n        intentName: output.intentName !== undefined && output.intentName !== null ? output.intentName : undefined,\n        message: output.message !== undefined && output.message !== null ? output.message : undefined,\n        messageFormat: output.messageFormat !== undefined && output.messageFormat !== null ? output.messageFormat : undefined,\n        slotToElicit: output.slotToElicit !== undefined && output.slotToElicit !== null ? output.slotToElicit : undefined,\n        slots: output.slots !== undefined && output.slots !== null\n            ? deserializeAws_restJson1StringMap(output.slots, context)\n            : undefined,\n        type: output.type !== undefined && output.type !== null ? output.type : undefined,\n    };\n};\nvar deserializeAws_restJson1GenericAttachment = function (output, context) {\n    return {\n        attachmentLinkUrl: output.attachmentLinkUrl !== undefined && output.attachmentLinkUrl !== null\n            ? output.attachmentLinkUrl\n            : undefined,\n        buttons: output.buttons !== undefined && output.buttons !== null\n            ? deserializeAws_restJson1listOfButtons(output.buttons, context)\n            : undefined,\n        imageUrl: output.imageUrl !== undefined && output.imageUrl !== null ? output.imageUrl : undefined,\n        subTitle: output.subTitle !== undefined && output.subTitle !== null ? output.subTitle : undefined,\n        title: output.title !== undefined && output.title !== null ? output.title : undefined,\n    };\n};\nvar deserializeAws_restJson1genericAttachmentList = function (output, context) {\n    return (output || []).map(function (entry) { return deserializeAws_restJson1GenericAttachment(entry, context); });\n};\nvar deserializeAws_restJson1IntentConfidence = function (output, context) {\n    return {\n        score: output.score !== undefined && output.score !== null ? output.score : undefined,\n    };\n};\nvar deserializeAws_restJson1IntentList = function (output, context) {\n    return (output || []).map(function (entry) { return deserializeAws_restJson1PredictedIntent(entry, context); });\n};\nvar deserializeAws_restJson1IntentSummary = function (output, context) {\n    return {\n        checkpointLabel: output.checkpointLabel !== undefined && output.checkpointLabel !== null ? output.checkpointLabel : undefined,\n        confirmationStatus: output.confirmationStatus !== undefined && output.confirmationStatus !== null\n            ? output.confirmationStatus\n            : undefined,\n        dialogActionType: output.dialogActionType !== undefined && output.dialogActionType !== null ? output.dialogActionType : undefined,\n        fulfillmentState: output.fulfillmentState !== undefined && output.fulfillmentState !== null ? output.fulfillmentState : undefined,\n        intentName: output.intentName !== undefined && output.intentName !== null ? output.intentName : undefined,\n        slotToElicit: output.slotToElicit !== undefined && output.slotToElicit !== null ? output.slotToElicit : undefined,\n        slots: output.slots !== undefined && output.slots !== null\n            ? deserializeAws_restJson1StringMap(output.slots, context)\n            : undefined,\n    };\n};\nvar deserializeAws_restJson1IntentSummaryList = function (output, context) {\n    return (output || []).map(function (entry) { return deserializeAws_restJson1IntentSummary(entry, context); });\n};\nvar deserializeAws_restJson1listOfButtons = function (output, context) {\n    return (output || []).map(function (entry) { return deserializeAws_restJson1Button(entry, context); });\n};\nvar deserializeAws_restJson1PredictedIntent = function (output, context) {\n    return {\n        intentName: output.intentName !== undefined && output.intentName !== null ? output.intentName : undefined,\n        nluIntentConfidence: output.nluIntentConfidence !== undefined && output.nluIntentConfidence !== null\n            ? deserializeAws_restJson1IntentConfidence(output.nluIntentConfidence, context)\n            : undefined,\n        slots: output.slots !== undefined && output.slots !== null\n            ? deserializeAws_restJson1StringMap(output.slots, context)\n            : undefined,\n    };\n};\nvar deserializeAws_restJson1ResponseCard = function (output, context) {\n    return {\n        contentType: output.contentType !== undefined && output.contentType !== null ? output.contentType : undefined,\n        genericAttachments: output.genericAttachments !== undefined && output.genericAttachments !== null\n            ? deserializeAws_restJson1genericAttachmentList(output.genericAttachments, context)\n            : undefined,\n        version: output.version !== undefined && output.version !== null ? output.version : undefined,\n    };\n};\nvar deserializeAws_restJson1SentimentResponse = function (output, context) {\n    return {\n        sentimentLabel: output.sentimentLabel !== undefined && output.sentimentLabel !== null ? output.sentimentLabel : undefined,\n        sentimentScore: output.sentimentScore !== undefined && output.sentimentScore !== null ? output.sentimentScore : undefined,\n    };\n};\nvar deserializeAws_restJson1StringMap = function (output, context) {\n    return Object.entries(output).reduce(function (acc, _a) {\n        var _b;\n        var _c = __read(_a, 2), key = _c[0], value = _c[1];\n        return (__assign(__assign({}, acc), (_b = {}, _b[key] = value, _b)));\n    }, {});\n};\nvar deserializeMetadata = function (output) { return ({\n    httpStatusCode: output.statusCode,\n    httpHeaders: output.headers,\n    requestId: output.headers[\"x-amzn-requestid\"],\n}); };\n// Collect low-level response body stream to Uint8Array.\nvar collectBody = function (streamBody, context) {\n    if (streamBody === void 0) { streamBody = new Uint8Array(); }\n    if (streamBody instanceof Uint8Array) {\n        return Promise.resolve(streamBody);\n    }\n    return context.streamCollector(streamBody) || Promise.resolve(new Uint8Array());\n};\n// Encode Uint8Array data into string with utf-8.\nvar collectBodyString = function (streamBody, context) {\n    return collectBody(streamBody, context).then(function (body) { return context.utf8Encoder(body); });\n};\nvar isSerializableHeaderValue = function (value) {\n    return value !== undefined &&\n        value !== \"\" &&\n        (!Object.getOwnPropertyNames(value).includes(\"length\") || value.length != 0) &&\n        (!Object.getOwnPropertyNames(value).includes(\"size\") || value.size != 0);\n};\nvar parseBody = function (streamBody, context) {\n    return collectBodyString(streamBody, context).then(function (encoded) {\n        if (encoded.length) {\n            return JSON.parse(encoded);\n        }\n        return {};\n    });\n};\n/**\n * Load an error code for the aws.rest-json-1.1 protocol.\n */\nvar loadRestJsonErrorCode = function (output, data) {\n    var findKey = function (object, key) { return Object.keys(object).find(function (k) { return k.toLowerCase() === key.toLowerCase(); }); };\n    var sanitizeErrorCode = function (rawValue) {\n        var cleanValue = rawValue;\n        if (cleanValue.indexOf(\":\") >= 0) {\n            cleanValue = cleanValue.split(\":\")[0];\n        }\n        if (cleanValue.indexOf(\"#\") >= 0) {\n            cleanValue = cleanValue.split(\"#\")[1];\n        }\n        return cleanValue;\n    };\n    var headerKey = findKey(output.headers, \"x-amzn-errortype\");\n    if (headerKey !== undefined) {\n        return sanitizeErrorCode(output.headers[headerKey]);\n    }\n    if (data.code !== undefined) {\n        return sanitizeErrorCode(data.code);\n    }\n    if (data[\"__type\"] !== undefined) {\n        return sanitizeErrorCode(data[\"__type\"]);\n    }\n    return \"\";\n};\n//# sourceMappingURL=Aws_restJson1.js.map","import { __extends } from \"tslib\";\nimport { PostTextRequest, PostTextResponse } from \"../models/models_0\";\nimport { deserializeAws_restJson1PostTextCommand, serializeAws_restJson1PostTextCommand, } from \"../protocols/Aws_restJson1\";\nimport { getSerdePlugin } from \"@aws-sdk/middleware-serde\";\nimport { Command as $Command } from \"@aws-sdk/smithy-client\";\nvar PostTextCommand = /** @class */ (function (_super) {\n    __extends(PostTextCommand, _super);\n    // Start section: command_properties\n    // End section: command_properties\n    function PostTextCommand(input) {\n        var _this = \n        // Start section: command_constructor\n        _super.call(this) || this;\n        _this.input = input;\n        return _this;\n        // End section: command_constructor\n    }\n    PostTextCommand.prototype.resolveMiddleware = function (clientStack, configuration, options) {\n        this.middlewareStack.use(getSerdePlugin(configuration, this.serialize, this.deserialize));\n        var stack = clientStack.concat(this.middlewareStack);\n        var logger = configuration.logger;\n        var clientName = \"LexRuntimeServiceClient\";\n        var commandName = \"PostTextCommand\";\n        var handlerExecutionContext = {\n            logger: logger,\n            clientName: clientName,\n            commandName: commandName,\n            inputFilterSensitiveLog: PostTextRequest.filterSensitiveLog,\n            outputFilterSensitiveLog: PostTextResponse.filterSensitiveLog,\n        };\n        if (typeof logger.info === \"function\") {\n            logger.info({\n                clientName: clientName,\n                commandName: commandName,\n            });\n        }\n        var requestHandler = configuration.requestHandler;\n        return stack.resolve(function (request) {\n            return requestHandler.handle(request.request, options || {});\n        }, handlerExecutionContext);\n    };\n    PostTextCommand.prototype.serialize = function (input, context) {\n        return serializeAws_restJson1PostTextCommand(input, context);\n    };\n    PostTextCommand.prototype.deserialize = function (output, context) {\n        return deserializeAws_restJson1PostTextCommand(output, context);\n    };\n    return PostTextCommand;\n}($Command));\nexport { PostTextCommand };\n//# sourceMappingURL=PostTextCommand.js.map","import { __extends } from \"tslib\";\nimport { PostContentRequest, PostContentResponse } from \"../models/models_0\";\nimport { deserializeAws_restJson1PostContentCommand, serializeAws_restJson1PostContentCommand, } from \"../protocols/Aws_restJson1\";\nimport { getSerdePlugin } from \"@aws-sdk/middleware-serde\";\nimport { Command as $Command } from \"@aws-sdk/smithy-client\";\nvar PostContentCommand = /** @class */ (function (_super) {\n    __extends(PostContentCommand, _super);\n    // Start section: command_properties\n    // End section: command_properties\n    function PostContentCommand(input) {\n        var _this = \n        // Start section: command_constructor\n        _super.call(this) || this;\n        _this.input = input;\n        return _this;\n        // End section: command_constructor\n    }\n    PostContentCommand.prototype.resolveMiddleware = function (clientStack, configuration, options) {\n        this.middlewareStack.use(getSerdePlugin(configuration, this.serialize, this.deserialize));\n        var stack = clientStack.concat(this.middlewareStack);\n        var logger = configuration.logger;\n        var clientName = \"LexRuntimeServiceClient\";\n        var commandName = \"PostContentCommand\";\n        var handlerExecutionContext = {\n            logger: logger,\n            clientName: clientName,\n            commandName: commandName,\n            inputFilterSensitiveLog: PostContentRequest.filterSensitiveLog,\n            outputFilterSensitiveLog: PostContentResponse.filterSensitiveLog,\n        };\n        if (typeof logger.info === \"function\") {\n            logger.info({\n                clientName: clientName,\n                commandName: commandName,\n            });\n        }\n        var requestHandler = configuration.requestHandler;\n        return stack.resolve(function (request) {\n            return requestHandler.handle(request.request, options || {});\n        }, handlerExecutionContext);\n    };\n    PostContentCommand.prototype.serialize = function (input, context) {\n        return serializeAws_restJson1PostContentCommand(input, context);\n    };\n    PostContentCommand.prototype.deserialize = function (output, context) {\n        return deserializeAws_restJson1PostContentCommand(output, context);\n    };\n    return PostContentCommand;\n}($Command));\nexport { PostContentCommand };\n//# sourceMappingURL=PostContentCommand.js.map","export var convert = function (stream) {\n    if (stream instanceof Blob || stream instanceof ReadableStream) {\n        return new Response(stream)\n            .arrayBuffer()\n            .then(function (buffer) { return new Uint8Array(buffer); });\n    }\n    else {\n        throw new Error('Readable is not supported.');\n    }\n};\n//# sourceMappingURL=convert.js.map","/*\n * Copyright 2017-2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\n * the License. A copy of the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\n * and limitations under the License.\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { AbstractInteractionsProvider } from './InteractionsProvider';\nimport { LexRuntimeServiceClient, PostTextCommand, PostContentCommand, } from '@aws-sdk/client-lex-runtime-service';\nimport { ConsoleLogger as Logger, Credentials, getAmplifyUserAgent, } from '@aws-amplify/core';\nimport { convert } from './AWSLexProviderHelper/convert';\nvar logger = new Logger('AWSLexProvider');\nvar AWSLexProvider = /** @class */ (function (_super) {\n    __extends(AWSLexProvider, _super);\n    function AWSLexProvider(options) {\n        if (options === void 0) { options = {}; }\n        var _this = _super.call(this, options) || this;\n        _this._botsCompleteCallback = {};\n        return _this;\n    }\n    AWSLexProvider.prototype.getProviderName = function () {\n        return 'AWSLexProvider';\n    };\n    AWSLexProvider.prototype.reportBotStatus = function (data, botname) {\n        var _this = this;\n        // Check if state is fulfilled to resolve onFullfilment promise\n        logger.debug('postContent state', data.dialogState);\n        if (data.dialogState === 'ReadyForFulfillment' ||\n            data.dialogState === 'Fulfilled') {\n            if (typeof this._botsCompleteCallback[botname] === 'function') {\n                setTimeout(function () {\n                    return _this._botsCompleteCallback[botname](null, { slots: data.slots });\n                }, 0);\n            }\n            if (this._config &&\n                typeof this._config[botname].onComplete === 'function') {\n                setTimeout(function () { return _this._config[botname].onComplete(null, { slots: data.slots }); }, 0);\n            }\n        }\n        if (data.dialogState === 'Failed') {\n            if (typeof this._botsCompleteCallback[botname] === 'function') {\n                setTimeout(function () { return _this._botsCompleteCallback[botname]('Bot conversation failed'); }, 0);\n            }\n            if (this._config &&\n                typeof this._config[botname].onComplete === 'function') {\n                setTimeout(function () { return _this._config[botname].onComplete('Bot conversation failed'); }, 0);\n            }\n        }\n    };\n    AWSLexProvider.prototype.sendMessage = function (botname, message) {\n        return __awaiter(this, void 0, void 0, function () {\n            var credentials, params, postTextCommand, data, err_1, content, messageType, postContentCommand, data, audioArray, err_2;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!this._config[botname]) {\n                            return [2 /*return*/, Promise.reject('Bot ' + botname + ' does not exist')];\n                        }\n                        return [4 /*yield*/, Credentials.get()];\n                    case 1:\n                        credentials = _a.sent();\n                        if (!credentials) {\n                            return [2 /*return*/, Promise.reject('No credentials')];\n                        }\n                        this.lexRuntimeServiceClient = new LexRuntimeServiceClient({\n                            region: this._config[botname].region,\n                            credentials: credentials,\n                            customUserAgent: getAmplifyUserAgent(),\n                        });\n                        if (!(typeof message === 'string')) return [3 /*break*/, 6];\n                        params = {\n                            botAlias: this._config[botname].alias,\n                            botName: botname,\n                            inputText: message,\n                            userId: credentials.identityId,\n                        };\n                        logger.debug('postText to lex', message);\n                        _a.label = 2;\n                    case 2:\n                        _a.trys.push([2, 4, , 5]);\n                        postTextCommand = new PostTextCommand(params);\n                        return [4 /*yield*/, this.lexRuntimeServiceClient.send(postTextCommand)];\n                    case 3:\n                        data = _a.sent();\n                        this.reportBotStatus(data, botname);\n                        return [2 /*return*/, data];\n                    case 4:\n                        err_1 = _a.sent();\n                        return [2 /*return*/, Promise.reject(err_1)];\n                    case 5: return [3 /*break*/, 11];\n                    case 6:\n                        content = message.content, messageType = message.options.messageType;\n                        if (messageType === 'voice') {\n                            params = {\n                                botAlias: this._config[botname].alias,\n                                botName: botname,\n                                contentType: 'audio/x-l16; sample-rate=16000',\n                                inputStream: content,\n                                userId: credentials.identityId,\n                                accept: 'audio/mpeg',\n                            };\n                        }\n                        else {\n                            params = {\n                                botAlias: this._config[botname].alias,\n                                botName: botname,\n                                contentType: 'text/plain; charset=utf-8',\n                                inputStream: content,\n                                userId: credentials.identityId,\n                                accept: 'audio/mpeg',\n                            };\n                        }\n                        logger.debug('postContent to lex', message);\n                        _a.label = 7;\n                    case 7:\n                        _a.trys.push([7, 10, , 11]);\n                        postContentCommand = new PostContentCommand(params);\n                        return [4 /*yield*/, this.lexRuntimeServiceClient.send(postContentCommand)];\n                    case 8:\n                        data = _a.sent();\n                        return [4 /*yield*/, convert(data.audioStream)];\n                    case 9:\n                        audioArray = _a.sent();\n                        this.reportBotStatus(data, botname);\n                        return [2 /*return*/, __assign(__assign({}, data), { audioStream: audioArray })];\n                    case 10:\n                        err_2 = _a.sent();\n                        return [2 /*return*/, Promise.reject(err_2)];\n                    case 11: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AWSLexProvider.prototype.onComplete = function (botname, callback) {\n        if (!this._config[botname]) {\n            throw new ErrorEvent('Bot ' + botname + ' does not exist');\n        }\n        this._botsCompleteCallback[botname] = callback;\n    };\n    return AWSLexProvider;\n}(AbstractInteractionsProvider));\nexport { AWSLexProvider };\n//# sourceMappingURL=AWSLexProvider.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { Amplify, ConsoleLogger as Logger } from '@aws-amplify/core';\nimport { AWSLexProvider } from './Providers';\nvar logger = new Logger('Interactions');\nvar InteractionsClass = /** @class */ (function () {\n    /**\n     * Initialize PubSub with AWS configurations\n     *\n     * @param {InteractionsOptions} options - Configuration object for Interactions\n     */\n    function InteractionsClass(options) {\n        this._options = options;\n        logger.debug('Interactions Options', this._options);\n        this._pluggables = {};\n    }\n    InteractionsClass.prototype.getModuleName = function () {\n        return 'Interactions';\n    };\n    /**\n     *\n     * @param {InteractionsOptions} options - Configuration object for Interactions\n     * @return {Object} - The current configuration\n     */\n    InteractionsClass.prototype.configure = function (options) {\n        var _this = this;\n        var opt = options ? options.Interactions || options : {};\n        logger.debug('configure Interactions', { opt: opt });\n        this._options = __assign(__assign({ bots: {} }, opt), opt.Interactions);\n        var aws_bots_config = this._options.aws_bots_config;\n        var bots_config = this._options.bots;\n        if (!Object.keys(bots_config).length && aws_bots_config) {\n            // Convert aws_bots_config to bots object\n            if (Array.isArray(aws_bots_config)) {\n                aws_bots_config.forEach(function (bot) {\n                    _this._options.bots[bot.name] = bot;\n                });\n            }\n        }\n        // Check if AWSLex provider is already on pluggables\n        if (!this._pluggables.AWSLexProvider &&\n            bots_config &&\n            Object.keys(bots_config)\n                .map(function (key) { return bots_config[key]; })\n                .find(function (bot) { return !bot.providerName || bot.providerName === 'AWSLexProvider'; })) {\n            this._pluggables.AWSLexProvider = new AWSLexProvider();\n        }\n        Object.keys(this._pluggables).map(function (key) {\n            _this._pluggables[key].configure(_this._options.bots);\n        });\n        return this._options;\n    };\n    InteractionsClass.prototype.addPluggable = function (pluggable) {\n        if (pluggable && pluggable.getCategory() === 'Interactions') {\n            if (!this._pluggables[pluggable.getProviderName()]) {\n                pluggable.configure(this._options.bots);\n                this._pluggables[pluggable.getProviderName()] = pluggable;\n                return;\n            }\n            else {\n                throw new Error('Bot ' + pluggable.getProviderName() + ' already plugged');\n            }\n        }\n    };\n    InteractionsClass.prototype.send = function (botname, message) {\n        return __awaiter(this, void 0, void 0, function () {\n            var botProvider;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!this._options.bots || !this._options.bots[botname]) {\n                            throw new Error('Bot ' + botname + ' does not exist');\n                        }\n                        botProvider = this._options.bots[botname].providerName || 'AWSLexProvider';\n                        if (!this._pluggables[botProvider]) {\n                            throw new Error('Bot ' +\n                                botProvider +\n                                ' does not have valid pluggin did you try addPluggable first?');\n                        }\n                        return [4 /*yield*/, this._pluggables[botProvider].sendMessage(botname, message)];\n                    case 1: return [2 /*return*/, _a.sent()];\n                }\n            });\n        });\n    };\n    InteractionsClass.prototype.onComplete = function (botname, callback) {\n        if (!this._options.bots || !this._options.bots[botname]) {\n            throw new Error('Bot ' + botname + ' does not exist');\n        }\n        var botProvider = this._options.bots[botname].providerName || 'AWSLexProvider';\n        if (!this._pluggables[botProvider]) {\n            throw new Error('Bot ' +\n                botProvider +\n                ' does not have valid pluggin did you try addPluggable first?');\n        }\n        this._pluggables[botProvider].onComplete(botname, callback);\n    };\n    return InteractionsClass;\n}());\nexport { InteractionsClass };\nexport var Interactions = new InteractionsClass(null);\nAmplify.register(Interactions);\n//# sourceMappingURL=Interactions.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nimport { r as registerInstance, h, c as createEvent, H as Host, g as getElement } from './index-3fb5c139.js';\nimport { Logger, browserOrNode, I18n } from '@aws-amplify/core';\nimport '@aws-amplify/auth';\nimport { T as Translations } from './Translations-c833f663.js';\nimport { d as NO_INTERACTIONS_MODULE_FOUND } from './constants-d1abe7de.js';\nimport { Interactions } from '@aws-amplify/interactions';\n// AudioRecorder settings\nvar RECORDER_EXPORT_MIME_TYPE = 'application/octet-stream';\nvar DEFAULT_EXPORT_SAMPLE_RATE = 16000;\nvar FFT_SIZE = 2048; // window size in samples for Fast Fourier Transform (FFT)\nvar FFT_MAX_DECIBELS = -10; // maximum power value in the scaling range for the FFT analysis data\nvar FFT_MIN_DECIBELS = -90; // minimum power value in the scaling range for the FFT analysis data\nvar FFT_SMOOTHING_TIME_CONSTANT = 0.85; // averaging constant with the last analysis frame\n/**\n * Merges multiple buffers into one.\n */\nvar mergeBuffers = function (bufferArray, recLength) {\n    var result = new Float32Array(recLength);\n    var offset = 0;\n    for (var i = 0; i < bufferArray.length; i++) {\n        result.set(bufferArray[i], offset);\n        offset += bufferArray[i].length;\n    }\n    return result;\n};\n/**\n * Downsamples audio to desired export sample rate.\n */\nvar downsampleBuffer = function (buffer, recordSampleRate, exportSampleRate) {\n    if (exportSampleRate === recordSampleRate) {\n        return buffer;\n    }\n    var sampleRateRatio = recordSampleRate / exportSampleRate;\n    var newLength = Math.round(buffer.length / sampleRateRatio);\n    var result = new Float32Array(newLength);\n    var offsetResult = 0;\n    var offsetBuffer = 0;\n    while (offsetResult < result.length) {\n        var nextOffsetBuffer = Math.round((offsetResult + 1) * sampleRateRatio);\n        var accum = 0, count = 0;\n        for (var i = offsetBuffer; i < nextOffsetBuffer && i < buffer.length; i++) {\n            accum += buffer[i];\n            count++;\n        }\n        result[offsetResult] = accum / count;\n        offsetResult++;\n        offsetBuffer = nextOffsetBuffer;\n    }\n    return result;\n};\n/**\n * converts raw audio values to 16 bit pcm.\n */\nvar floatTo16BitPCM = function (output, offset, input) {\n    var byteOffset = offset;\n    for (var i = 0; i < input.length; i++, byteOffset += 2) {\n        var s = Math.max(-1, Math.min(1, input[i]));\n        output.setInt16(byteOffset, s < 0 ? s * 0x8000 : s * 0x7fff, true);\n    }\n};\n/**\n * Write given strings in big-endian order.\n */\nvar writeString = function (view, offset, string) {\n    for (var i = 0; i < string.length; i++) {\n        view.setUint8(offset + i, string.charCodeAt(i));\n    }\n};\n/**\n * Encodes raw pcm audio into a wav file.\n */\nvar encodeWAV = function (samples, exportSampleRate) {\n    /**\n     * WAV file consists of three parts: RIFF header, WAVE subchunk, and data subchunk. We precompute the size of them.\n     */\n    var audioSize = samples.length * 2; // We use 16-bit samples, so we have (2 * sampleLength) bytes.\n    var fmtSize = 24; // Byte size of the fmt subchunk: 24 bytes that the audio information that we'll set below.\n    var dataSize = 8 + audioSize; // Byte size of the data subchunk: raw sound data plus 8 bytes for the subchunk descriptions.\n    var totalByteSize = 12 + fmtSize + dataSize; // Byte size of the whole file, including the chunk header / descriptor.\n    // create DataView object to write byte values into\n    var buffer = new ArrayBuffer(totalByteSize); // buffer to write the chunk values in.\n    var view = new DataView(buffer);\n    /**\n     * Start writing the .wav file. We write top to bottom, so byte offset (first numeric argument) increases strictly.\n     */\n    // RIFF header\n    writeString(view, 0, 'RIFF'); // At offset 0, write the letters \"RIFF\"\n    view.setUint32(4, fmtSize + dataSize, true); // At offset 4, write the size of fmt and data chunk size combined.\n    writeString(view, 8, 'WAVE'); // At offset 8, write the format type \"WAVE\"\n    // fmt subchunk\n    writeString(view, 12, 'fmt '); //chunkdId 'fmt '\n    view.setUint32(16, fmtSize - 8, true); // fmt subchunk size below this value. We set 8 bytes already, so subtract 8 bytes from fmtSize.\n    view.setUint16(20, 1, true); // Audio format code, which is 1 for PCM.\n    view.setUint16(22, 1, true); // Number of audio channels. We use mono, ie 1.\n    view.setUint32(24, exportSampleRate, true); // Sample rate of the audio file.\n    view.setUint32(28, exportSampleRate * 2, true); // Data rate, or # of data bytes per second. Since each sample is 2 bytes, this is 2 * sampleRate.\n    view.setUint16(32, 2, true); // block align, # of bytes per sample including all channels, ie. 2 bytes.\n    view.setUint16(34, 16, true); // bits per sample, ie. 16 bits\n    // data subchunk\n    writeString(view, 36, 'data'); // write the chunkId 'data'\n    view.setUint32(40, audioSize, true); // Audio byte size\n    floatTo16BitPCM(view, 44, samples); // raw pcm values then go here.\n    return view;\n};\n/**\n * Given arrays of raw pcm audio, downsamples the audio to desired sample rate and encodes it to a wav audio file.\n *\n * @param recBuffer {Float32Array[]} - 2d float array containing the recorded raw audio\n * @param recLength {number} - total length of recorded audio\n * @param recordSampleRate {number} - sample rate of the recorded audio\n * @param exportSampleRate {number} - desired sample rate of the exported file\n */\nvar exportBuffer = function (recBuffer, recLength, recordSampleRate, exportSampleRate) {\n    var mergedBuffers = mergeBuffers(recBuffer, recLength);\n    var downsampledBuffer = downsampleBuffer(mergedBuffers, recordSampleRate, exportSampleRate);\n    var encodedWav = encodeWAV(downsampledBuffer, exportSampleRate);\n    var audioBlob = new Blob([encodedWav], {\n        type: RECORDER_EXPORT_MIME_TYPE,\n    });\n    return audioBlob;\n};\nvar logger = new Logger('AudioRecorder');\nvar AudioRecorder = /** @class */ (function () {\n    function AudioRecorder(options) {\n        // input mic stream is stored in a buffer\n        this.streamBuffer = [];\n        this.streamBufferLength = 0;\n        this.recording = false;\n        this.options = options;\n    }\n    /**\n     * This must be called first to enable audio context and request microphone access.\n     * Once access granted, it connects all the necessary audio nodes to the context so that it can begin recording or playing.\n     */\n    AudioRecorder.prototype.init = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!browserOrNode().isBrowser) return [3 /*break*/, 2];\n                        window.AudioContext = window.AudioContext || window.webkitAudioContext;\n                        this.audioContext = new AudioContext();\n                        return [4 /*yield*/, navigator.mediaDevices\n                                .getUserMedia({ audio: true })\n                                .then(function (stream) {\n                                _this.audioSupported = true;\n                                _this.setupAudioNodes(stream);\n                            })\n                                .catch(function () {\n                                _this.audioSupported = false;\n                                return Promise.reject('Audio is not supported');\n                            })];\n                    case 1:\n                        _a.sent();\n                        return [3 /*break*/, 3];\n                    case 2:\n                        this.audioSupported = false;\n                        return [2 /*return*/, Promise.reject('Audio is not supported')];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * Setup audio nodes after successful `init`.\n     */\n    AudioRecorder.prototype.setupAudioNodes = function (stream) {\n        return __awaiter(this, void 0, void 0, function () {\n            var err_1, sourceNode, processorNode, analyserNode;\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, this.audioContext.resume()];\n                    case 1:\n                        _a.sent();\n                        return [3 /*break*/, 3];\n                    case 2:\n                        err_1 = _a.sent();\n                        logger.error(err_1);\n                        return [3 /*break*/, 3];\n                    case 3:\n                        sourceNode = this.audioContext.createMediaStreamSource(stream);\n                        processorNode = this.audioContext.createScriptProcessor(4096, 1, 1);\n                        processorNode.onaudioprocess = function (audioProcessingEvent) {\n                            if (!_this.recording)\n                                return;\n                            var stream = audioProcessingEvent.inputBuffer.getChannelData(0);\n                            _this.streamBuffer.push(new Float32Array(stream)); // set to a copy of the stream\n                            _this.streamBufferLength += stream.length;\n                            _this.analyse();\n                        };\n                        analyserNode = this.audioContext.createAnalyser();\n                        analyserNode.minDecibels = FFT_MIN_DECIBELS;\n                        analyserNode.maxDecibels = FFT_MAX_DECIBELS;\n                        analyserNode.smoothingTimeConstant = FFT_SMOOTHING_TIME_CONSTANT;\n                        sourceNode.connect(analyserNode);\n                        analyserNode.connect(processorNode);\n                        processorNode.connect(sourceNode.context.destination);\n                        this.analyserNode = analyserNode;\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * Start recording audio and listen for silence.\n     *\n     * @param onSilence {SilenceHandler} - called whenever silence is detected\n     * @param visualizer {Visualizer} - called with audio data on each audio process to be used for visualization.\n     */\n    AudioRecorder.prototype.startRecording = function (onSilence, visualizer) {\n        return __awaiter(this, void 0, void 0, function () {\n            var context, err_2;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (this.recording || !this.audioSupported)\n                            return [2 /*return*/];\n                        this.onSilence = onSilence || function () { };\n                        this.visualizer = visualizer || function () { };\n                        context = this.audioContext;\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 3, , 4]);\n                        return [4 /*yield*/, context.resume()];\n                    case 2:\n                        _a.sent();\n                        return [3 /*break*/, 4];\n                    case 3:\n                        err_2 = _a.sent();\n                        logger.error(err_2);\n                        return [3 /*break*/, 4];\n                    case 4:\n                        this.start = Date.now();\n                        this.recording = true;\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * Pause recording\n     */\n    AudioRecorder.prototype.stopRecording = function () {\n        if (!this.audioSupported)\n            return;\n        this.recording = false;\n    };\n    /**\n     * Pause recording and clear audio buffer\n     */\n    AudioRecorder.prototype.clear = function () {\n        this.stopRecording();\n        this.streamBufferLength = 0;\n        this.streamBuffer = [];\n    };\n    /**\n     * Plays given audioStream with audioContext\n     *\n     * @param buffer {Uint8Array} - audioStream to be played\n     */\n    AudioRecorder.prototype.play = function (buffer) {\n        var _this = this;\n        if (!buffer || !this.audioSupported)\n            return;\n        var myBlob = new Blob([buffer]);\n        return new Promise(function (res, rej) {\n            var fileReader = new FileReader();\n            fileReader.onload = function () {\n                if (_this.playbackSource)\n                    _this.playbackSource.disconnect(); // disconnect previous playback source\n                _this.playbackSource = _this.audioContext.createBufferSource();\n                var successCallback = function (buf) {\n                    _this.playbackSource.buffer = buf;\n                    _this.playbackSource.connect(_this.audioContext.destination);\n                    _this.playbackSource.onended = function () {\n                        return res();\n                    };\n                    _this.playbackSource.start(0);\n                };\n                var errorCallback = function (err) {\n                    return rej(err);\n                };\n                _this.audioContext.decodeAudioData(fileReader.result, successCallback, errorCallback);\n            };\n            fileReader.onerror = function () { return rej(); };\n            fileReader.readAsArrayBuffer(myBlob);\n        });\n    };\n    /**\n     * Stops playing audio if there's a playback source connected.\n     */\n    AudioRecorder.prototype.stop = function () {\n        if (this.playbackSource) {\n            this.playbackSource.stop();\n        }\n    };\n    /**\n     * Called after each audioProcess. Check for silence and give fft time domain data to visualizer.\n     */\n    AudioRecorder.prototype.analyse = function () {\n        if (!this.audioSupported)\n            return;\n        var analyser = this.analyserNode;\n        analyser.fftSize = FFT_SIZE;\n        var bufferLength = analyser.fftSize;\n        var dataArray = new Uint8Array(bufferLength);\n        var amplitude = this.options.amplitude;\n        var time = this.options.time;\n        analyser.getByteTimeDomainData(dataArray);\n        this.visualizer(dataArray, bufferLength);\n        for (var i = 0; i < bufferLength; i++) {\n            // Normalize between -1 and 1.\n            var curr_value_time = dataArray[i] / 128 - 1.0;\n            if (curr_value_time > amplitude || curr_value_time < -1 * amplitude) {\n                this.start = Date.now();\n            }\n        }\n        var newtime = Date.now();\n        var elapsedTime = newtime - this.start;\n        if (elapsedTime > time) {\n            this.onSilence();\n        }\n    };\n    /**\n     * Encodes recorded buffer to a wav file and exports it to a blob.\n     *\n     * @param exportSampleRate {number} - desired sample rate of the exported buffer\n     */\n    AudioRecorder.prototype.exportWAV = function (exportSampleRate) {\n        if (exportSampleRate === void 0) { exportSampleRate = DEFAULT_EXPORT_SAMPLE_RATE; }\n        return __awaiter(this, void 0, void 0, function () {\n            var recordSampleRate, blob;\n            return __generator(this, function (_a) {\n                if (!this.audioSupported)\n                    return [2 /*return*/];\n                recordSampleRate = this.audioContext.sampleRate;\n                blob = exportBuffer(this.streamBuffer, this.streamBufferLength, recordSampleRate, exportSampleRate);\n                this.clear();\n                return [2 /*return*/, blob];\n            });\n        });\n    };\n    return AudioRecorder;\n}());\nvar visualize = function (dataArray, bufferLength, canvas) {\n    if (!canvas)\n        return;\n    if (!browserOrNode().isBrowser)\n        throw new Error('Visualization is not supported on non-browsers.');\n    var _a = canvas.getBoundingClientRect(), width = _a.width, height = _a.height;\n    // need to update the default canvas width and height\n    canvas.width = width;\n    canvas.height = height;\n    var canvasCtx = canvas.getContext('2d');\n    canvasCtx.fillStyle = 'white';\n    canvasCtx.clearRect(0, 0, width, height);\n    var draw = function () {\n        canvasCtx.fillRect(0, 0, width, height);\n        canvasCtx.lineWidth = 1;\n        var color = getComputedStyle(document.documentElement).getPropertyValue('--amplify-primary-color');\n        canvasCtx.strokeStyle = !color || color === '' ? '#ff9900' : color; // TODO: try separate css variable\n        canvasCtx.beginPath();\n        var sliceWidth = (width * 1.0) / bufferLength;\n        var x = 0;\n        for (var i = 0; i < bufferLength || i % 3 === 0; i++) {\n            var value = dataArray[i] / 128.0;\n            var y = (value * height) / 2;\n            if (i === 0) {\n                canvasCtx.moveTo(x, y);\n            }\n            else {\n                canvasCtx.lineTo(x, y);\n            }\n            x += sliceWidth;\n        }\n        canvasCtx.lineTo(canvas.width, canvas.height / 2);\n        canvasCtx.stroke();\n    };\n    // Register our draw function with requestAnimationFrame.\n    requestAnimationFrame(draw);\n};\nvar amplifyChatbotCss = \".bot .dot{background-color:var(--bot-dot-color)}.user .dot{background-color:var(--user-dot-color)}.dot-flashing{width:2.625rem}.dot-flashing .dot{display:inline-block;width:0.625rem;height:0.625rem;border-radius:10rem;opacity:0.65}.dot-flashing .left{-webkit-animation:dot-flashing 1s infinite alternate;animation:dot-flashing 1s infinite alternate;-webkit-animation-delay:0s;animation-delay:0s}.dot-flashing .middle{margin-left:0.375rem;margin-right:0.375rem;-webkit-animation:dot-flashing 1s infinite linear alternate;animation:dot-flashing 1s infinite linear alternate;-webkit-animation-delay:0.5s;animation-delay:0.5s}.dot-flashing .right{-webkit-animation:dot-flashing 1s infinite alternate;animation:dot-flashing 1s infinite alternate;-webkit-animation-delay:1s;animation-delay:1s}@-webkit-keyframes dot-flashing{0%{opacity:0.65}50%,100%{opacity:0.1}}@keyframes dot-flashing{0%{opacity:0.65}50%,100%{opacity:0.1}}:host{--width:28.75rem;--height:37.5rem;--header-color:var(--amplify-secondary-color);--header-size:var(--amplify-text-lg);--bot-background-color:rgb(230, 230, 230);--bot-text-color:black;--bot-dot-color:var(--bot-text-color);--user-background-color:var(--amplify-blue);--user-text-color:var(--amplify-white);--user-dot-color:var(--user-text-color)}.amplify-chatbot{display:-ms-inline-flexbox;display:inline-flex;-ms-flex-direction:column;flex-direction:column;background-color:var(--background-color);border-radius:0.375rem;-webkit-box-shadow:0.0625rem 0rem 0.25rem 0 rgba(0, 0, 0, 0.15);box-shadow:0.0625rem 0rem 0.25rem 0 rgba(0, 0, 0, 0.15);-webkit-box-sizing:border-box;box-sizing:border-box;font-family:var(--amplify-font-family);margin-bottom:1rem;width:100%;height:var(--height);max-width:var(--width)}@media (min-width: 672px){.amplify-chatbot{width:var(--width)}}.header{padding:1.25rem 0.375rem 1.25rem 0.375rem;color:var(--header-color);font-size:var(--header-size);font-weight:bold;text-align:center;word-wrap:break-word}.body{border-top:0.0625rem solid rgba(0, 0, 0, 0.05);padding:1.5rem 1rem 0 1rem;display:-ms-flexbox;display:flex;-ms-flex-positive:1;flex-grow:1;-ms-flex-direction:column;flex-direction:column;overflow:auto}.bubble{max-width:100%;padding:0.8em 1.4em;text-align:left;word-wrap:break-word;margin-bottom:0.625rem}.bot{margin-right:auto;background-color:var(--bot-background-color);color:var(--bot-text-color);border-radius:1.5rem 1.5rem 1.5rem 0}.user{margin-left:auto;background-color:var(--user-background-color);color:var(--user-text-color);border-radius:1.5rem 1.5rem 0 1.5rem}.footer{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;border-top:0.062rem solid rgba(0, 0, 0, 0.05);padding-right:0.625rem;min-height:3.125rem}.footer amplify-input{--border:none;--margin:0;-ms-flex-positive:1;flex-grow:1}canvas{margin-left:0.625rem;margin-right:0.625rem;-ms-flex-positive:1;flex-grow:1;height:3.125rem}.icon-button{--icon-height:1.25rem;--icon-fill:var(--amplify-primary-color);--padding:0.625rem;--width:auto}\";\n// enum for possible bot states\nvar ChatState;\n(function (ChatState) {\n    ChatState[ChatState[\"Initial\"] = 0] = \"Initial\";\n    ChatState[ChatState[\"Listening\"] = 1] = \"Listening\";\n    ChatState[ChatState[\"SendingText\"] = 2] = \"SendingText\";\n    ChatState[ChatState[\"SendingVoice\"] = 3] = \"SendingVoice\";\n    ChatState[ChatState[\"Error\"] = 4] = \"Error\";\n})(ChatState || (ChatState = {}));\n// Message types\nvar MessageFrom;\n(function (MessageFrom) {\n    MessageFrom[\"Bot\"] = \"bot\";\n    MessageFrom[\"User\"] = \"user\";\n})(MessageFrom || (MessageFrom = {}));\n// Error types\nvar ChatErrorType;\n(function (ChatErrorType) {\n    ChatErrorType[ChatErrorType[\"Recoverable\"] = 0] = \"Recoverable\";\n    ChatErrorType[ChatErrorType[\"Unrecoverable\"] = 1] = \"Unrecoverable\";\n})(ChatErrorType || (ChatErrorType = {}));\nvar AmplifyChatbot = /** @class */ (function () {\n    function class_1(hostRef) {\n        var _this = this;\n        registerInstance(this, hostRef);\n        /** Clear messages when conversation finishes */\n        this.clearOnComplete = false;\n        /** Continue listening to users after they send the message */\n        this.conversationModeOn = false;\n        /** Text placed in the top header */\n        this.botTitle = Translations.CHATBOT_TITLE;\n        /** Whether voice chat is enabled */\n        this.voiceEnabled = false;\n        /** Whether text chat is enabled */\n        this.textEnabled = true;\n        /** Amount of silence (in ms) to wait for */\n        this.silenceTime = 1500;\n        /** Noise threshold between -1 and 1. Anything below is considered a silence. */\n        this.silenceThreshold = 0.2;\n        /** Messages in current session */\n        this.messages = [];\n        /** Text input box value  */\n        this.text = '';\n        /** Current app state */\n        this.chatState = ChatState.Initial;\n        /**\n         * Rendering methods\n         */\n        this.messageJSX = function (messages) {\n            var messageList = messages.map(function (message) { return h(\"div\", { class: \"bubble \" + message.from }, message.content); });\n            if (_this.chatState === ChatState.SendingText || _this.chatState === ChatState.SendingVoice) {\n                // if waiting for voice message, show animation on user side because app is waiting for transcript. Else put it on bot side.\n                var client = _this.chatState === ChatState.SendingText ? MessageFrom.Bot : MessageFrom.User;\n                messageList.push(h(\"div\", { class: \"bubble \" + client }, h(\"div\", { class: \"dot-flashing \" + client }, h(\"span\", { class: \"dot left\" }), h(\"span\", { class: \"dot middle\" }), h(\"span\", { class: \"dot right\" }))));\n            }\n            return messageList;\n        };\n        this.chatCompleted = createEvent(this, \"chatCompleted\", 7);\n    }\n    // Occurs when user presses enter in input box\n    class_1.prototype.submitHandler = function (_event) {\n        this.sendTextMessage();\n    };\n    /**\n     * Lifecycle functions\n     */\n    class_1.prototype.componentWillLoad = function () {\n        if (!Interactions || typeof Interactions.onComplete !== 'function') {\n            throw new Error(NO_INTERACTIONS_MODULE_FOUND);\n        }\n        this.validateProps();\n    };\n    class_1.prototype.componentDidRender = function () {\n        // scroll to the bottom if necessary\n        var body = this.element.shadowRoot.querySelector('.body');\n        body.scrollTop = body.scrollHeight;\n    };\n    class_1.prototype.validateProps = function () {\n        var _this = this;\n        if (!this.voiceEnabled && !this.textEnabled) {\n            this.setError(Translations.CHAT_DISABLED_ERROR, ChatErrorType.Unrecoverable);\n            return;\n        }\n        else if (!this.botName) {\n            this.setError(Translations.NO_BOT_NAME_ERROR, ChatErrorType.Unrecoverable);\n            return;\n        }\n        if (this.welcomeMessage)\n            this.appendToChat(this.welcomeMessage, MessageFrom.Bot);\n        // Initialize AudioRecorder if voice is enabled\n        if (this.voiceEnabled) {\n            this.audioRecorder = new AudioRecorder({\n                time: this.silenceTime,\n                amplitude: this.silenceThreshold,\n            });\n            this.audioRecorder.init().catch(function (err) {\n                _this.setError(err, ChatErrorType.Recoverable);\n            });\n        }\n        // Callback function to be called after chat is completed\n        var onComplete = function (err, data) {\n            _this.chatCompleted.emit({\n                data: data,\n                err: err,\n            });\n            if (_this.clearOnComplete) {\n                _this.reset();\n            }\n            else {\n                _this.chatState = ChatState.Initial;\n            }\n        };\n        try {\n            Interactions.onComplete(this.botName, onComplete);\n        }\n        catch (err) {\n            this.setError(err, ChatErrorType.Unrecoverable);\n        }\n    };\n    /**\n     * Handlers\n     */\n    class_1.prototype.handleMicButton = function () {\n        var _this = this;\n        if (this.chatState !== ChatState.Initial)\n            return;\n        this.audioRecorder.stop();\n        this.chatState = ChatState.Listening;\n        this.audioRecorder.startRecording(function () { return _this.handleSilence(); }, function (data, length) { return _this.visualizer(data, length); });\n    };\n    class_1.prototype.handleSilence = function () {\n        var _this = this;\n        this.chatState = ChatState.SendingVoice;\n        this.audioRecorder.stopRecording();\n        this.audioRecorder.exportWAV().then(function (blob) {\n            _this.sendVoiceMessage(blob);\n        });\n    };\n    class_1.prototype.handleTextChange = function (event) {\n        var target = event.target;\n        this.text = target.value;\n    };\n    class_1.prototype.handleCancelButton = function () {\n        this.audioRecorder.clear();\n        this.chatState = ChatState.Initial;\n    };\n    class_1.prototype.handleToastClose = function (errorType) {\n        this.error = undefined; // clear error\n        // if error is recoverable, reset the app state to initial\n        if (errorType === ChatErrorType.Recoverable) {\n            this.chatState = ChatState.Initial;\n        }\n    };\n    /**\n     * Visualization\n     */\n    class_1.prototype.visualizer = function (dataArray, bufferLength) {\n        var canvas = this.element.shadowRoot.querySelector('canvas');\n        visualize(dataArray, bufferLength, canvas);\n    };\n    /**\n     * Interactions helpers\n     */\n    class_1.prototype.sendTextMessage = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var text, response, err_3;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (this.text.length === 0 || this.chatState !== ChatState.Initial)\n                            return [2 /*return*/];\n                        text = this.text;\n                        this.text = '';\n                        this.appendToChat(text, MessageFrom.User);\n                        this.chatState = ChatState.SendingText;\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 3, , 4]);\n                        return [4 /*yield*/, Interactions.send(this.botName, text)];\n                    case 2:\n                        response = _a.sent();\n                        return [3 /*break*/, 4];\n                    case 3:\n                        err_3 = _a.sent();\n                        this.setError(err_3, ChatErrorType.Recoverable);\n                        return [2 /*return*/];\n                    case 4:\n                        if (response.message) {\n                            this.appendToChat(response.message, MessageFrom.Bot);\n                        }\n                        this.chatState = ChatState.Initial;\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    class_1.prototype.sendVoiceMessage = function (audioInput) {\n        return __awaiter(this, void 0, void 0, function () {\n            var interactionsMessage, response, err_4, dialogState;\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        interactionsMessage = {\n                            content: audioInput,\n                            options: {\n                                messageType: 'voice',\n                            },\n                        };\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 3, , 4]);\n                        return [4 /*yield*/, Interactions.send(this.botName, interactionsMessage)];\n                    case 2:\n                        response = _a.sent();\n                        return [3 /*break*/, 4];\n                    case 3:\n                        err_4 = _a.sent();\n                        this.setError(err_4, ChatErrorType.Recoverable);\n                        return [2 /*return*/];\n                    case 4:\n                        this.chatState = ChatState.Initial;\n                        dialogState = response.dialogState;\n                        if (response.inputTranscript)\n                            this.appendToChat(response.inputTranscript, MessageFrom.User);\n                        this.appendToChat(response.message, MessageFrom.Bot);\n                        return [4 /*yield*/, this.audioRecorder\n                                .play(response.audioStream)\n                                .then(function () {\n                                // if conversationMode is on, chat is incomplete, and mic button isn't pressed yet, resume listening.\n                                if (_this.conversationModeOn &&\n                                    dialogState !== 'Fulfilled' &&\n                                    dialogState !== 'Failed' &&\n                                    _this.chatState === ChatState.Initial) {\n                                    _this.handleMicButton();\n                                }\n                            })\n                                .catch(function (err) { return _this.setError(err, ChatErrorType.Recoverable); })];\n                    case 5:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    class_1.prototype.appendToChat = function (content, from) {\n        this.messages = __spreadArrays(this.messages, [\n            {\n                content: content,\n                from: from,\n            },\n        ]);\n    };\n    /**\n     * State control methods\n     */\n    class_1.prototype.setError = function (error, errorType) {\n        var message = typeof error === 'string' ? error : error.message;\n        this.chatState = ChatState.Error;\n        this.error = { message: message, errorType: errorType };\n    };\n    class_1.prototype.reset = function () {\n        this.chatState = ChatState.Initial;\n        this.text = '';\n        this.error = undefined;\n        this.messages = [];\n        if (this.welcomeMessage)\n            this.appendToChat(this.welcomeMessage, MessageFrom.Bot);\n        this.audioRecorder && this.audioRecorder.clear();\n    };\n    class_1.prototype.listeningFooterJSX = function () {\n        var _this = this;\n        var visualization = h(\"canvas\", { height: \"50\" });\n        var cancelButton = (h(\"amplify-button\", { \"data-test\": \"chatbot-cancel-button\", handleButtonClick: function () { return _this.handleCancelButton(); }, class: \"icon-button\", variant: \"icon\", icon: \"ban\" }));\n        return [visualization, cancelButton];\n    };\n    class_1.prototype.footerJSX = function () {\n        var _this = this;\n        if (this.chatState === ChatState.Listening)\n            return this.listeningFooterJSX();\n        var inputPlaceholder = this.textEnabled\n            ? Translations.TEXT_INPUT_PLACEHOLDER\n            : Translations.VOICE_INPUT_PLACEHOLDER;\n        var textInput = (h(\"amplify-input\", { placeholder: I18n.get(inputPlaceholder), description: \"text\", handleInputChange: function (evt) { return _this.handleTextChange(evt); }, value: this.text, disabled: this.chatState === ChatState.Error || !this.textEnabled }));\n        var micButton = this.voiceEnabled && (h(\"amplify-button\", { \"data-test\": \"chatbot-mic-button\", handleButtonClick: function () { return _this.handleMicButton(); }, class: \"icon-button\", variant: \"icon\", icon: \"microphone\", disabled: this.chatState === ChatState.Error || this.chatState !== ChatState.Initial }));\n        var sendButton = this.textEnabled && (h(\"amplify-button\", { \"data-test\": \"chatbot-send-button\", class: \"icon-button\", variant: \"icon\", icon: \"send\", handleButtonClick: function () { return _this.sendTextMessage(); }, disabled: this.chatState === ChatState.Error || this.chatState !== ChatState.Initial }));\n        return [textInput, micButton, sendButton];\n    };\n    class_1.prototype.errorToast = function () {\n        var _this = this;\n        if (!this.error)\n            return;\n        var _a = this.error, message = _a.message, errorType = _a.errorType;\n        return h(\"amplify-toast\", { message: I18n.get(message), handleClose: function () { return _this.handleToastClose(errorType); } });\n    };\n    class_1.prototype.render = function () {\n        return (h(Host, null, h(\"div\", { class: \"amplify-chatbot\" }, h(\"slot\", { name: \"header\" }, h(\"div\", { class: \"header\", \"data-test\": \"chatbot-header\" }, I18n.get(this.botTitle))), h(\"div\", { class: \"body\", \"data-test\": \"chatbot-body\" }, this.messageJSX(this.messages)), h(\"div\", { class: \"footer\", \"data-test\": \"chatbot-footer\" }, this.footerJSX()), this.errorToast())));\n    };\n    Object.defineProperty(class_1.prototype, \"element\", {\n        get: function () { return getElement(this); },\n        enumerable: false,\n        configurable: true\n    });\n    return class_1;\n}());\nAmplifyChatbot.style = amplifyChatbotCss;\nexport { AmplifyChatbot as amplify_chatbot };\n"],"sourceRoot":""}